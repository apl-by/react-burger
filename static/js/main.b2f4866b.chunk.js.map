{"version":3,"sources":["components/burger-ingredients/burger-ingredients.module.css","components/burger-constructor/ingredient/ingredient.module.css","pages/ingr-detail-page/ingr-detail-page.module.css","components/feed/feed.module.css","pages/order-info-page/order-info-page.module.css","components/modal/modal-overlay/modal-overlay.module.css","components/burger-ingredients/burg-ingr-tabs/burg-ingr-tabs.module.css","components/generic/container/container.module.css","pages/profile-orders-page/profile-orders-page.module.css","components/feed-item/feed-item.module.css","components/app-header/app-header.module.css","components/modal/order-info/order-info.module.css","components/generic/profile-nav/profile-nav.module.css","hooks/useConfirm.ts","services/middlewares/socket-middleware.ts","components/app-header/app-header.tsx","components/modal/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/modal/alert/alert.tsx","hooks/reduxHooks.ts","services/actions/interaction.ts","components/layout-with-header/layout-with-header.tsx","components/burger-ingredients/burg-ingr-tabs/burg-ingr-tabs.tsx","utils/data.ts","components/burger-ingredients/burg-ingr-scroll/burg-ingr-card/burg-ingr-card.tsx","utils/utils.ts","components/burger-ingredients/burg-ingr-scroll/burg-ingr-scroll.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor/bun/bun.tsx","services/actions/main.ts","components/burger-constructor/ingredient/ingredient.tsx","images/modal-done.png","components/modal/order-details/order-details.tsx","utils/api-requests.ts","services/thunks/main.ts","components/burger-constructor/burger-constructor.tsx","pages/main-page/main-page.tsx","components/generic/container/container.tsx","components/generic/form/form.tsx","components/generic/paragraph-link/paragraph-link.tsx","components/generic/email-input/email-input.tsx","components/generic/password-input/password-input.tsx","services/actions/requests.ts","services/actions/user.ts","services/thunks/user.ts","pages/login-page/login-page.tsx","services/thunks/requests.ts","components/generic/text-input/text-input.tsx","components/modal/confirm/confirm.tsx","pages/register-page/register-page.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/reset-password-page/reset-password-page.tsx","components/generic/profile-nav/profile-nav.tsx","pages/profile-page/profile-page.tsx","pages/page-404/page-404.tsx","services/actions/ws.ts","components/protected-route/protected-route.tsx","components/modal/ingredient-details/ingredient-details.tsx","pages/ingr-detail-page/ingr-detail-page.tsx","pages/modal-ingr-detail-page/modal-ingr-detail-page.tsx","components/modal/order-info/order-info.tsx","pages/modal-order-info-page/modal-order-info-page.tsx","components/layout-feed/layout-feed.tsx","components/feed-item/feed-item.tsx","components/feed/feed.tsx","components/stats/stats.tsx","pages/feed-page/feed-page.tsx","pages/profile-orders-page/profile-orders-page.tsx","pages/order-info-page/order-info-page.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/main.ts","services/reducers/user.ts","services/reducers/requests.ts","services/reducers/interaction.ts","services/reducers/ws.ts","services/reducers/index.ts","services/store/store.ts","index.tsx","components/burger-constructor/burger-constructor.module.css","pages/profile-page/profile-page.module.css","components/stats/stats.module.css","components/burger-ingredients/burg-ingr-scroll/burg-ingr-scroll.module.css","components/burger-ingredients/burg-ingr-scroll/burg-ingr-card/burg-ingr-card.module.css","components/modal/order-details/order-details.module.css","components/modal/ingredient-details/ingredient-details.module.css","components/generic/form/form.module.css","pages/page-404/page-404.module.css","components/modal/modal.module.css","components/modal/alert/alert.module.css","components/generic/paragraph-link/paragraph-link.module.css","components/modal/confirm/confirm.module.css","pages/feed-page/feed-page.module.css","components/layout-with-header/layout-with-header.module.css"],"names":["module","exports","resolveCallback","wsUrl","wsActions","setClassName","isActive","styles","nav__link","nav__link_active","AppHeader","memo","className","header","header__logo","to","nav","nav__list","nav__item","type","nav__text","ModalOverlay","children","onClick","overlay","Modal","title","onClose","mod","modTitle","closeByEsc","useCallback","e","key","useEffect","document","addEventListener","removeEventListener","closeModal","createPortal","target","currentTarget","modal","modal__container","modal__title","getElementById","Alert","message","container","text","useSelector","selectorHook","useDispatch","dispatchHook","ALERT_ERROR","CLEAR_ERROR","SHOW_CONFIRM","HIDE_CONFIRM","SHOW_ALERT","HIDE_ALERT","LayoutWithHeader","dispatch","errors","state","errorAlert","alertMessage","alert","layout","DndProvider","backend","HTML5Backend","main","length","status","BurgIngrTabs","sections","tabIndex","tabs","map","i","value","String","id","active","section","menuSections","modalCardTemplate","sign","dndTypes","cookiesSettings","name","options","BurgIngrCard","cardData","navigate","useNavigate","backgroundPath","useLocation","pathname","bunId","store","burgConstructor","bun","_id","ingrCount","ingrCounter","useDrag","item","dragRef","count","useMemo","undefined","card","background","ref","size","src","image","alt","card__img","card__box","card__price","price","card__name","hasEmptyInput","data","Object","values","some","setErrInEmptyInput","fromEntries","entries","k","hasErrorInput","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","setCookie","path","expires","Date","toUTCString","updatedCookie","encodeURIComponent","optionKey","optionValue","handleOrder","order","menu","number","date","orderDate","parseISO","createdAt","diff","differenceInCalendarDays","signature","formatRelativeLocale","lastWeek","yesterday","today","tomorrow","nextWeek","other","time","formatRelative","locale","ru","token","countIngr","ingredients","reduce","obj","el","ingrForRender","v","ingr","find","filter","totalPrice","total","BurgIngrScroll","sectionAnchor","containerAnchor","onScroll","sortedMenu","prev","push","sauce","window","throttle","block","ind","block__item","block__title","current","cards","cards__card","BurgerIngredients","containerRef","useRef","sectionsRef","useState","setTabIndex","ingredients__title","containerPos","getBoundingClientRect","top","scrollValue","scrollBy","behavior","tabInd","findIndex","arr","Math","abs","min","n","Bun","isLocked","thumbnail","image_mobile","MENU_REQUEST","MENU_SUCCESS","MENU_ERROR","ADD_BUN","REMOVE_BUN","ADD_INGREDIENT","REMOVE_INGREDIENT","MOVE_INGREDIENT","CLEAR_CONSTRUCTOR","ORDER_REQUEST","ORDER_SUCCESS","ORDER_ERROR","CLOSE_ORDER_DETAILS","Ingredient","ingrRef","useDrop","accept","hover","dragIndex","index","hoverIndex","moveIngr","drop","collect","monitor","isDragging","drag","dragIngr","stateCopy","deletedHover","splice","payload","opacity","ingredient","handleClose","removeIngredient","OrderDetails","orderDetails","orderRes","details","details__order","details__text","_headers","_baseUrl","apiRequests","this","res","json","then","jsonRes","ok","body","Promise","reject","fetch","_handleResToJson","_handleResponse","method","headers","Authorization","JSON","stringify","email","accessToken","refreshToken","_reusePostOrder","postOrder","setOrderRequestBody","success","Error","batch","_reusePostOrderError","err","BurgerConstructor","location","isAuthorized","userData","empty","isModalOpen","canSubmit","handleDrop","dropTarget","uniqueId","random","toString","substr","ingrArr","ingrSum","setTotalPrice","constructor","constructor__text","constructor__container","constructor__scroll","constructor__confirm","constructor__price","preventDefault","from","a","MainPage","Container","Form","onSubmit","btnName","childrenArr","Children","toArray","form","form__title","form__list","child","form__input","ParagraphLink","link","EmailInput","onChange","icon","placeholder","disabled","error","setError","fieldDisabled","setDisabled","inputRef","onBlur","test","validateField","onFocus","onIconClick","setTimeout","focus","errorText","PasswordInput","visible","setVisible","iconType","START_REQUEST","END_REQUEST","USER_REQUEST","USER_SUCCESS","USER_ERROR","UPDATE_USER_REQUEST","UPDATE_USER_SUCCESS","UPDATE_USER_ERROR","LOGOUT_REQUEST","LOGOUT","_reuseGetUser","getUser","user","_reuseUserError","console","log","_reusePatchUser","patchUser","_reusePatchUserError","logout","catch","finally","args","forEach","deleteCookie","LoginPage","wasInitialAuth","isRequest","request","password","inputValue","setInputValue","setErr","login","TextInput","Confirm","btnTrue","btnFalse","onConfirm","onCancel","buttons","useConfirm","confirm","rej","RegisterPage","confirmation","show","register","ForgotPasswordPage","confirmEmail","ResetPasswordPage","resetPassword","ProfileNav","mix","end","description","ProfilePage","refState","userRequest","wasEdition","setWasEdition","isEqual","form__buttons","Page404","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","wsActionTypes","wsInit","onOpen","onError","onMessage","ProtectedRoute","isTrueWsPath","includes","IngredientDetails","image_large","details__img","details__name","details__list","details__item","IngrDetailPage","param","useParams","ModalIngrDetailPage","OrderInfo","isImgLoaded","setIsImgLoaded","order__status_color_greentext","order__list","order__item","hidden","onLoad","order__img","order__price","order__value","ModalOrderInfoPage","LayoutFeed","FeedItem","orderData","lengthIngr","ingredientsArr","ingredientsForRender","slice","pathTo","item__number","item__data","item__name","item__name_color_green","item__result","item__ingredients","item__ingredient","style","transform","zIndex","item__img","item__count","item__ellipsis","item__price","item__value","Feed","allOrders","orders","resAll","ownerOrders","resOwner","reverse","feedArr","feed","Stats","ordersAll","ordersNumbers","done","pending","doneForRenfer","pendingForRenfer","insertStateHtml","numbers","state__numbers","state__number","insertStatsHtml","stats","totalToday","FeedPage","ProfileOrdersPage","OrderInfoPage","ordersOwner","isProfilePage","Number","handledOrder","App","navigationType","useNavigationType","condition","Boolean","startsWith","getMenu","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialMenu","menuRequest","menuFailed","initialConstructor","initialOrderDetails","orderList","orderRequest","orderFailed","initialUser","userFailed","initialState","initialErrState","initialAlertState","initialConfirmState","initialOrders","wsConnected","rootReducer","combineReducers","action","ingrCounterKey","ingrCounterValue","newList","removedIngr","url","resApi","enhancer","composeWithDevTools","applyMiddleware","thunk","socket","next","WebSocket","readyState","close","onopen","event","onerror","onmessage","parsedData","parse","onclose","createStore","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b2f4866b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__3zpjU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient_ingredient__dAzqD\",\"ingredient_hidden\":\"ingredient_ingredient_hidden__1o7g1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingr-detail-page_container__1XK61\",\"title\":\"ingr-detail-page_title__jlPaL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"feed_feed__1HUnA\",\"feed_type_profile\":\"feed_feed_type_profile__34ITU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"order-info-page_section__1fNEq\",\"title\":\"order-info-page_title__2RUly\",\"container\":\"order-info-page_container__1ywd3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__1q1yX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tabs\":\"burg-ingr-tabs_tabs__1UdZo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"container_container__3FRHd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile-orders-page_container__2tqX2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"feed-item_item__ZhaYP\",\"item__data-container\":\"feed-item_item__data-container__25Iz4\",\"item__name\":\"feed-item_item__name__1ewyl\",\"item__name_color_green\":\"feed-item_item__name_color_green__5C8RH\",\"item__result\":\"feed-item_item__result__3G2Cp\",\"item__ingredients\":\"feed-item_item__ingredients__2V1SZ\",\"item__ingredient\":\"feed-item_item__ingredient__2rV3y\",\"item__img\":\"feed-item_item__img__25rLk\",\"item__count\":\"feed-item_item__count__42DcA\",\"item__ellipsis\":\"feed-item_item__ellipsis__20ae0\",\"item__price\":\"feed-item_item__price__3XTiD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__2mZfQ\",\"header__logo\":\"app-header_header__logo__25jIg\",\"nav\":\"app-header_nav__30JXW\",\"nav__list\":\"app-header_nav__list__2dfm_\",\"nav__item\":\"app-header_nav__item__3SbAn\",\"nav__link\":\"app-header_nav__link__2OWy6\",\"nav__link_active\":\"app-header_nav__link_active__3_pr2\",\"nav__text\":\"app-header_nav__text__KDWKk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-info_order__2DBNs\",\"order__list\":\"order-info_order__list__20tMF\",\"order__status\":\"order-info_order__status__TXpYy\",\"order__status_color_greentext\":\"order-info_order__status_color_greentext__2qJev\",\"order__item\":\"order-info_order__item__tGi0m\",\"order__img\":\"order-info_order__img__2Ta59\",\"order__item-name\":\"order-info_order__item-name__2NdjF\",\"order__price\":\"order-info_order__price__2adZD\",\"order__item-value\":\"order-info_order__item-value__kqrVg\",\"order__value\":\"order-info_order__value__12dsj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile-nav\":\"profile-nav_profile-nav__3kvNc\",\"nav__list\":\"profile-nav_nav__list__T6CL3\",\"nav__item\":\"profile-nav_nav__item__2DW_d\",\"nav__link\":\"profile-nav_nav__link__3A2lF\",\"nav__link_active\":\"profile-nav_nav__link_active__ICRyj\",\"description\":\"profile-nav_description__1y0od\"};","import { HIDE_CONFIRM, SHOW_CONFIRM } from \"../services/actions/interaction\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nlet resolveCallback: (value: boolean) => void;\r\n\r\nconst useConfirm = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const onConfirm = (): void => {\r\n    dispatch({\r\n      type: HIDE_CONFIRM,\r\n    });\r\n    resolveCallback(true);\r\n  };\r\n\r\n  const onCancel = (): void => {\r\n    dispatch({\r\n      type: HIDE_CONFIRM,\r\n    });\r\n    resolveCallback(false);\r\n  };\r\n\r\n  const confirm = (text: string): Promise<boolean> => {\r\n    dispatch({\r\n      type: SHOW_CONFIRM,\r\n      payload: text,\r\n    });\r\n\r\n    return new Promise<boolean>((res, rej) => {\r\n      resolveCallback = res;\r\n    });\r\n  };\r\n\r\n  return { confirm, onConfirm, onCancel };\r\n};\r\n\r\nexport default useConfirm;\r\n\r\n","import type { Middleware, MiddlewareAPI } from \"redux\";\r\nimport { batch } from \"react-redux\";\r\nimport type {\r\n  TApplicationActions,\r\n  TAppDispatch,\r\n  TRootState,\r\n  TAppThunk,\r\n} from \"../../types/services\";\r\nimport { IWsActionTypes } from \"../actions\";\r\nimport { apiRequests } from \"../../utils/api-requests\";\r\nimport { getCookie } from \"../../utils/utils\";\r\nimport { ORDER_ERROR } from \"../actions\";\r\nimport { ALERT_ERROR } from \"../actions\";\r\n\r\nexport const socketMiddleware = (\r\n  wsUrl: string,\r\n  wsActions: IWsActionTypes\r\n): Middleware => {\r\n  return (store: MiddlewareAPI<TAppDispatch, TRootState>) => {\r\n    let socket: WebSocket | null = null;\r\n    return (next) => (action: TApplicationActions) => {\r\n      const dispatch = store.dispatch as TAppDispatch | TAppThunk<void>;\r\n      const { type, payload } = action;\r\n      const { wsInit, onMessage, onOpen, onClose, onError } = wsActions;\r\n\r\n      if (type === wsInit) {\r\n        const url = payload ? wsUrl + payload : wsUrl;\r\n        socket = new WebSocket(url);\r\n      }\r\n      if (type === onClose && socket?.readyState === 1) {\r\n        socket.close();\r\n      }\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({ type: onOpen });\r\n        };\r\n\r\n        socket.onerror = (event) => {\r\n          dispatch({ type: onError, payload: event });\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          if (parsedData.success) {\r\n            dispatch({\r\n              type: onMessage,\r\n              payload: { resApi: parsedData, url: socket?.url },\r\n            });\r\n          }\r\n          if (parsedData.message === \"Invalid or missing token\") {\r\n            apiRequests.refreshToken(getCookie(\"refreshToken\")).catch(err => {\r\n               batch(() => {\r\n                 dispatch({ type: ORDER_ERROR });\r\n                 dispatch({ type: ALERT_ERROR, payload: err });\r\n               });\r\n            });\r\n          }\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: onClose });\r\n        };\r\n      }\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import styles from \"./app-header.module.css\";\r\nimport { memo, FC } from \"react\";\r\nimport {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  ProfileIcon,\r\n  Logo,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { NavLink, Link } from \"react-router-dom\";\r\n\r\nconst setClassName = ({ isActive }: { isActive: boolean }): string =>\r\n  `${styles.nav__link} ${\r\n    isActive ? styles.nav__link_active : \"text_color_inactive\"\r\n  }`;\r\n\r\nconst AppHeader: FC = memo(() => {\r\n  return (\r\n    <header className={`${styles.header} pt-4 pb-4`}>\r\n      <div className={styles.header__logo}>\r\n        <Link to=\"/\">\r\n          <Logo />\r\n        </Link>\r\n      </div>\r\n      <nav className={styles.nav}>\r\n        <ul className={styles.nav__list}>\r\n          <li className={`${styles.nav__item} mr-2 pt-4 pb-4 pr-5 pl-5`}>\r\n            <NavLink to=\"/\" className={setClassName}>\r\n              <BurgerIcon type=\"primary\" />\r\n              <span\r\n                className={`${styles.nav__text} ml-2 text text_type_main-default`}\r\n              >\r\n                Конструктор\r\n              </span>\r\n            </NavLink>\r\n          </li>\r\n          <li className={`${styles.nav__item} mr-2 pt-4 pb-4 pr-5 pl-5`}>\r\n            <NavLink to=\"/feed\" className={setClassName}>\r\n              <ListIcon type=\"primary\" />\r\n              <span\r\n                className={`${styles.nav__text} ml-2 text text_type_main-default`}\r\n              >\r\n                Лента заказов\r\n              </span>\r\n            </NavLink>\r\n          </li>\r\n          <li className={`${styles.nav__item} mr-2 pt-4 pb-4 pr-5 pl-5`}>\r\n            <NavLink to=\"/profile\" className={setClassName}>\r\n              <ProfileIcon type=\"primary\" />\r\n              <span\r\n                className={`${styles.nav__text} ml-2 text text_type_main-default`}\r\n              >\r\n                Личный кабинет\r\n              </span>\r\n            </NavLink>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  );\r\n});\r\n\r\nexport default AppHeader;\r\n","import { FC, SyntheticEvent } from \"react\";\r\nimport styles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlay {\r\n  onClick: (e: SyntheticEvent) => void;\r\n}\r\n\r\nconst ModalOverlay: FC<IModalOverlay> = ({ children, onClick }) => {\r\n  return (\r\n    <div className={styles.overlay} onClick={onClick}>\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import styles from \"./modal.module.css\";\r\nimport ModalOverlay from \"./modal-overlay/modal-overlay\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useEffect, useCallback, FC } from \"react\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ninterface IModal {\r\n  title?: string;\r\n  mod?: string;\r\n  modTitle?: string\r\n  onClose: () => void;\r\n}\r\n\r\nconst Modal: FC<IModal> = ({\r\n  children,\r\n  title,\r\n  onClose,\r\n  mod = \"pb-15\",\r\n  modTitle = \"text_type_main-large\",\r\n}) => {\r\n  const closeByEsc = useCallback<(e: KeyboardEvent) => void>(\r\n    (e) => {\r\n      if (e.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    },\r\n    [onClose]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keyup\", closeByEsc);\r\n    return () => document.removeEventListener(\"keyup\", closeByEsc);\r\n  }, [closeByEsc]);\r\n\r\n  const closeModal = () => {\r\n    onClose();\r\n  };\r\n\r\n  return createPortal(\r\n    <ModalOverlay onClick={(e) => e.target !== e.currentTarget || closeModal()}>\r\n      <div className={`${styles.modal} pt-10 pr-10 pl-10 ${mod}`}>\r\n        <div className={styles.modal__container}>\r\n          {title && (\r\n            <h2 className={`${styles.modal__title} text ${modTitle}`}>\r\n              {title}\r\n            </h2>\r\n          )}\r\n          <CloseIcon type=\"primary\" onClick={closeModal} />\r\n        </div>\r\n        {children}\r\n      </div>\r\n    </ModalOverlay>,\r\n    document.getElementById(\"react-modals\") as HTMLElement\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import { FC } from \"react\";\r\nimport styles from \"./alert.module.css\";\r\n\r\ninterface IAlert {\r\n  title?: string;\r\n  message: string;\r\n}\r\n\r\nconst Alert: FC<IAlert> = ({ title, message }) => {\r\n  return (\r\n    <div className={styles.container}>\r\n      {title && (\r\n        <h2 className={`${styles.title} text text_type_main-large mb-15`}>\r\n          {title}\r\n        </h2>\r\n      )}\r\n      <p className={`${styles.text}  mb-15 text text_type_main-large`}>\r\n        {message}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Alert;\r\n","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook,\r\n} from \"react-redux\";\r\nimport { TAppDispatch, TAppThunk, TRootState } from \"../types/services\";\r\n\r\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\r\n\r\nexport const useDispatch = () => dispatchHook<TAppDispatch | TAppThunk>();\r\n","import { TActionTemplate, TErrorAlertPayload } from \"../../types/services\";\r\n\r\nexport const ALERT_ERROR = \"ALERT_ERROR\";\r\nexport const CLEAR_ERROR = \"CLEAR_ERROR\";\r\nexport const SHOW_CONFIRM = \"SHOW_CONFIRM\";\r\nexport const HIDE_CONFIRM = \"HIDE_CONFIRM\";\r\nexport const SHOW_ALERT = \"SHOW_ALERT\";\r\nexport const HIDE_ALERT = \"HIDE_ALERT\";\r\n\r\n// типы экшенов:\r\n \r\n// для errorAlertReducer\r\ntype TAlertErrorAction = Required<TActionTemplate<\r\n  typeof ALERT_ERROR,\r\n  TErrorAlertPayload\r\n  >>;\r\n\r\ntype TClearErrorAction = TActionTemplate<typeof CLEAR_ERROR>;\r\n\r\nexport type TErrorAlertActions = TAlertErrorAction | TClearErrorAction;\r\n\r\n// для сonfirmationReducer\r\ntype TShowConfirmAction = Required<TActionTemplate<typeof SHOW_CONFIRM, string>>;\r\n\r\ntype THideConfirmAction = TActionTemplate<typeof HIDE_CONFIRM>;\r\n\r\nexport type TConfirmationActions = TShowConfirmAction | THideConfirmAction;\r\n\r\n// для alertReducer\r\ntype TShowAlertAction = Required<TActionTemplate<typeof SHOW_ALERT, string>>;\r\n\r\ntype THideAlertAction = TActionTemplate<typeof HIDE_ALERT>;\r\n\r\nexport type TAlertActions = TShowAlertAction | THideAlertAction;\r\n","import styles from \"./layout-with-header.module.css\";\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport Modal from \"../modal/modal\";\r\nimport Alert from \"../modal/alert/alert\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { Outlet } from \"react-router\";\r\nimport { memo, FC } from \"react\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { CLEAR_ERROR, HIDE_ALERT } from \"../../services/actions/interaction\";\r\n\r\nconst LayoutWithHeader: FC = memo(() => {\r\n  const dispatch = useDispatch();\r\n  const errors = useSelector((state) => state.errorAlert.errors);\r\n  const alertMessage = useSelector((state) => state.alert.message);\r\n\r\n  const handleErrAlertClose = (): void => {\r\n    dispatch({ type: CLEAR_ERROR });\r\n  };\r\n  const handleAlertClose = (): void => {\r\n    dispatch({ type: HIDE_ALERT });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.layout}>\r\n        <AppHeader />\r\n        <DndProvider backend={HTML5Backend}>\r\n          <main className={styles.main}>\r\n            <Outlet />\r\n          </main>\r\n        </DndProvider>\r\n      </div>\r\n      {errors.length > 0 && (\r\n        <Modal onClose={handleErrAlertClose}>\r\n          <Alert\r\n            title={`Ошибка ${errors[0].status}`}\r\n            message={errors[0].message}\r\n          />\r\n        </Modal>\r\n      )}\r\n      {alertMessage && (\r\n        <Modal onClose={handleAlertClose}>\r\n          <Alert message={alertMessage} />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n});\r\n\r\nexport default LayoutWithHeader;\r\n","import { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport styles from \"./burg-ingr-tabs.module.css\";\r\nimport { FC } from \"react\";\r\nimport { IMenuSection } from \"../../../types/common\";\r\n\r\ninterface IBurgIngrTabs {\r\n  sections: Array<IMenuSection>;\r\n  tabIndex: number;\r\n  onClick: (ind: number) => void;\r\n}\r\n\r\nconst BurgIngrTabs: FC<IBurgIngrTabs> = ({ sections, tabIndex, onClick }) => {\r\n  return (\r\n    <div className={styles.tabs}>\r\n      {sections.map((i) => (\r\n        <Tab\r\n          value={String(i.id)}\r\n          active={tabIndex === i.id}\r\n          onClick={() => onClick(i.id)}\r\n          key={i.id}\r\n        >\r\n          {i.section}\r\n        </Tab>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgIngrTabs;\r\n","export const BASE_URL_API = \"https://norma.nomoreparties.space/api\";\r\n\r\nexport const BASE_URL_WS = \"wss://norma.nomoreparties.space\";\r\n\r\nexport const SECTION_TOP_MARGIN = 40;\r\n\r\nexport const menuSections = [\r\n  { id: 0, section: \"Булки\", key: \"bun\" },\r\n  { id: 1, section: \"Соусы\", key: \"sauce\" },\r\n  { id: 2, section: \"Начинки\", key: \"main\" },\r\n];\r\n\r\nexport const modalCardTemplate = [\r\n  { id: 0, sign: \"Калории, ккал\", key: \"calories\" },\r\n  { id: 1, sign: \"Белки, г\", key: \"proteins\" },\r\n  { id: 2, sign: \"Жиры, г\", key: \"fat\" },\r\n  { id: 3, sign: \"Углеводы, г\", key: \"carbohydrates\" },\r\n];\r\n\r\nexport const dndTypes = {\r\n  burgIngredient: \"burgIngredient\",\r\n  ingrConstructor: \"ingrConstructor\",\r\n};\r\n\r\nexport const cookiesSettings = {\r\n  accessToken: {\r\n    name: \"accessToken\",\r\n    options: {\r\n      \"max-age\": 604_800,\r\n    },\r\n  },\r\n  refreshToken: {\r\n    name: \"refreshToken\",\r\n    options: {\r\n      \"max-age\": 604_800,\r\n    },\r\n  },\r\n};\r\n","import styles from \"./burg-ingr-card.module.css\";\r\nimport {\r\n  CurrencyIcon,\r\n  Counter,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { dndTypes } from \"../../../../utils/data\";\r\nimport { memo, useMemo, FC } from \"react\";\r\nimport { useSelector } from \"../../../../hooks/reduxHooks\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { useNavigate, useLocation } from \"react-router\";\r\nimport { IMenuItem } from \"../../../../types/common\";\r\n\r\ninterface IBurgIngrCard {\r\n  cardData: IMenuItem;\r\n}\r\n\r\nconst BurgIngrCard: FC<IBurgIngrCard> = memo(({ cardData }) => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const backgroundPath = location.pathname;\r\n  const bunId = useSelector((store) => store.burgConstructor.bun?._id);\r\n  const ingrCount = useSelector(\r\n    (store) => store.burgConstructor.ingrCounter?.[cardData._id]\r\n  );\r\n\r\n  const [, dragRef] = useDrag({\r\n    type: dndTypes.burgIngredient,\r\n    item: { ...cardData },\r\n  });\r\n\r\n  const count = useMemo<number | undefined>(() => {\r\n    if (cardData.type === \"bun\") {\r\n      return bunId === cardData._id ? 2 : undefined;\r\n    } else {\r\n      return ingrCount;\r\n    }\r\n  }, [bunId, ingrCount, cardData._id, cardData.type]);\r\n\r\n  const handleClick = (): void => {\r\n    navigate(`/ingredients/${cardData._id}`, {\r\n      state: { background: { pathname: backgroundPath, key: cardData._id } },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={styles.card} onClick={handleClick} ref={dragRef}>\r\n      {count && <Counter count={count} size=\"default\" />}\r\n      <img\r\n        src={cardData.image}\r\n        alt={cardData.name}\r\n        className={`${styles.card__img} ml-4 mr-4`}\r\n      />\r\n      <div className={`${styles.card__box} mt-1 mb-1`}>\r\n        <p\r\n          className={`${styles.card__price} mr-2 text text_type_digits-default`}\r\n        >\r\n          {cardData.price}\r\n        </p>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n      <p className={`${styles.card__name} mr-2 text text_type_main-default`}>\r\n        {cardData.name}\r\n      </p>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default BurgIngrCard;\r\n","import {\r\n  IMenuItem,\r\n  ISortedMenu,\r\n  IAllInputs,\r\n  ICookieOptions,\r\n  IOrder,\r\n  IHandeledOrder,\r\n} from \"../types/common\";\r\nimport formatRelative from \"date-fns/formatRelative\";\r\nimport differenceInCalendarDays from \"date-fns/differenceInCalendarDays\";\r\nimport parseISO from \"date-fns/parseISO\";\r\nimport ru from \"date-fns/locale/ru\";\r\n\r\nexport const sortData = (data: IMenuItem[]): ISortedMenu => {\r\n  return data.reduce(\r\n    (prev: ISortedMenu, i: IMenuItem) => {\r\n      i.type === \"bun\"\r\n        ? prev.bun.push(i)\r\n        : i.type === \"sauce\"\r\n        ? prev.sauce.push(i)\r\n        : i.type === \"main\"\r\n        ? prev.main.push(i)\r\n        : void 0;\r\n\r\n      return prev;\r\n    },\r\n    { bun: [], sauce: [], main: [] }\r\n  );\r\n};\r\n\r\nexport const setOrderRequestBody = (\r\n  order: IMenuItem[]\r\n): { ingredients: string[] } => ({\r\n  ingredients: [...order.map((i: IMenuItem) => i._id)],\r\n});\r\n\r\nexport const setTotalPrice = (\r\n  bun: IMenuItem | null,\r\n  ingrArr: IMenuItem[]\r\n): number => {\r\n  const ingrSum = ingrArr.reduce(\r\n    (prev: number, i: IMenuItem) => prev + i.price,\r\n    0\r\n  );\r\n  return bun ? bun.price * 2 + ingrSum : ingrSum;\r\n};\r\n\r\nexport const generateId = (): string =>\r\n  Math.random().toString(36).substr(2, 12);\r\n\r\nexport const hasEmptyInput = (data: IAllInputs<string>): boolean =>\r\n  Object.values(data).some((i: string) => i === \"\");\r\n\r\nexport const setErrInEmptyInput = (\r\n  data: IAllInputs<string>\r\n): IAllInputs<boolean> =>\r\n  Object.fromEntries(\r\n    Object.entries(data).map(([k, v]: [string, string]): [string, boolean] =>\r\n      v === \"\" ? [k, true] : [k, false]\r\n    )\r\n  );\r\n\r\nexport const hasErrorInput = (data: IAllInputs<boolean>): boolean =>\r\n  Object.values(data).some((i) => i);\r\n\r\nexport const getCookie = (name: string): string | undefined => {\r\n  let matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" +\r\n        // eslint-disable-next-line no-useless-escape\r\n        name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") +\r\n        \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookie = (\r\n  name: string,\r\n  value: string,\r\n  options: ICookieOptions\r\n): void => {\r\n  options = {\r\n    path: \"/\",\r\n    ...options,\r\n  };\r\n\r\n  if (options.expires instanceof Date) {\r\n    options.expires = options.expires.toUTCString();\r\n  }\r\n\r\n  let updatedCookie =\r\n    encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\r\n\r\n  for (let optionKey in options) {\r\n    updatedCookie += \"; \" + optionKey;\r\n    let optionValue = options[optionKey as keyof ICookieOptions];\r\n    if (optionValue !== true) {\r\n      updatedCookie += \"=\" + optionValue;\r\n    }\r\n  }\r\n\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport const deleteCookie = (...args: string[]): void => {\r\n  args.forEach((i) =>\r\n    setCookie(i, \"\", {\r\n      \"max-age\": -1,\r\n    })\r\n  );\r\n};\r\n\r\nexport const handleOrder = (\r\n  order: IOrder,\r\n  menu: IMenuItem[]\r\n): IHandeledOrder => {\r\n  // установить статус\r\n  const { _id, name, number } = order;\r\n  const status =\r\n    order.status === \"created\"\r\n      ? \"Создан\"\r\n      : order.status === \"pending\"\r\n      ? \"Готовится\"\r\n      : order.status === \"done\"\r\n      ? \"Выполнен\"\r\n      : \"Не определен\";\r\n\r\n  // установить время\r\n  const date = new Date();\r\n  const orderDate = parseISO(order.createdAt);\r\n  const diff = differenceInCalendarDays(date, orderDate);\r\n  const signature =\r\n    diff === 2 ? \"2 дня назад,\" : diff === 3 ? \"3 дня назад,\" : \"P','\";\r\n\r\n  const formatRelativeLocale: { [key: string]: string } = {\r\n    lastWeek: signature + \" p 'i-'O\",\r\n    yesterday: \"'Вчера,' p 'i-'O\",\r\n    today: \"'Сегодня,' p 'i-'O\",\r\n    tomorrow: \"'Завтра,' p 'i-'O\",\r\n    nextWeek: \"P',' p 'i-'O\",\r\n    other: signature + \" p 'i-'O\",\r\n  };\r\n\r\n  const time = formatRelative(orderDate, date, {\r\n    locale: {\r\n      ...ru,\r\n      formatRelative: (token: string) => formatRelativeLocale[token],\r\n    },\r\n  });\r\n\r\n  // колличество уникальных ингредиентов\r\n  const countIngr = order.ingredients.reduce(\r\n    (obj: { [key: string]: number }, el: string) => {\r\n      if (obj[el]) {\r\n        obj[el] += 1;\r\n      } else {\r\n        obj[el] = 1;\r\n      }\r\n      return obj;\r\n    },\r\n    {}\r\n  );\r\n\r\n  // массив ингредиентов с данными\r\n  const ingrForRender = Object.entries(countIngr)\r\n    .map(([k, v]) => {\r\n      const ingr = menu.find((el) => el._id === k);\r\n      if (ingr) ingr.count = v;\r\n      return ingr;\r\n    })\r\n    .filter((i) => i) as IMenuItem[];\r\n\r\n  // суммарная цена\r\n  const totalPrice = ingrForRender.reduce((total, value) => {\r\n    return total + value.price * (value.count as number);\r\n  }, 0);\r\n\r\n  return {\r\n    _id,\r\n    name,\r\n    number,\r\n    status,\r\n    time,\r\n    ingrForRender,\r\n    totalPrice,\r\n  };\r\n};\r\n","import styles from \"./burg-ingr-scroll.module.css\";\r\nimport BurgIngrCard from \"./burg-ingr-card/burg-ingr-card\";\r\nimport { useMemo, FC, MutableRefObject, RefObject } from \"react\";\r\nimport { useSelector } from \"../../../hooks/reduxHooks\";\r\nimport { sortData } from \"../../../utils/utils\";\r\nimport throttle from \"lodash/throttle\";\r\nimport { ISortedMenu, IMenuSection } from \"../../../types/common\";\r\n\r\ninterface IBurgIngrScroll {\r\n  sections: Array<IMenuSection>;\r\n  sectionAnchor: MutableRefObject<HTMLHeadingElement[]>;\r\n  containerAnchor: RefObject<HTMLDivElement>;\r\n  onScroll: () => void;\r\n}\r\n\r\nconst BurgIngrScroll: FC<IBurgIngrScroll> = ({\r\n  sections,\r\n  sectionAnchor,\r\n  containerAnchor,\r\n  onScroll,\r\n}) => {\r\n  const { menu } = useSelector((store) => store.menu);\r\n\r\n  const sortedMenu = useMemo<ISortedMenu>(() => sortData(menu), [menu]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.window}\r\n      onScroll={throttle(onScroll, 100)}\r\n      ref={containerAnchor}\r\n    >\r\n      <ul className={styles.block}>\r\n        {sections.map((i, ind) => (\r\n          <li className={styles.block__item} key={i.id}>\r\n            <h2\r\n              className={`${styles.block__title} mt-10 mb-6 text text_type_main-medium`}\r\n              ref={(el) => (el ? (sectionAnchor.current[ind] = el) : null)}\r\n            >\r\n              {i.section}\r\n            </h2>\r\n            <ul className={`${styles.cards} pr-2 pl-4`}>\r\n              {sortedMenu[i.key as keyof ISortedMenu].map((item) => (\r\n                <li className={styles.cards__card} key={item._id}>\r\n                  <BurgIngrCard cardData={item} />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BurgIngrScroll;","import styles from \"./burger-ingredients.module.css\";\r\nimport BurgIngrTabs from \"./burg-ingr-tabs/burg-ingr-tabs\";\r\nimport BurgIngrScroll from \"./burg-ingr-scroll/burg-ingr-scroll\";\r\nimport { menuSections, SECTION_TOP_MARGIN } from \"../../utils/data\";\r\nimport { memo, useRef, useState, FC } from \"react\";\r\n\r\nconst BurgerIngredients: FC = memo(() => {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const sectionsRef = useRef<HTMLHeadingElement[] | []>([]);\r\n  const [tabIndex, setTabIndex] = useState<number>(0);\r\n\r\n  const setTabOnScroll = (): void => {\r\n    if (containerRef.current === null) return;\r\n    const containerPos = containerRef.current.getBoundingClientRect().top;\r\n    const sectionsPos = sectionsRef.current.map(\r\n      (i) => i.getBoundingClientRect().top - containerPos\r\n    );\r\n    const tabInd = sectionsPos.findIndex(\r\n      (i, ind, arr) => Math.abs(i) === Math.min(...arr.map((n) => Math.abs(n)))\r\n    );\r\n    setTabIndex(tabInd);\r\n  };\r\n\r\n  const handleClickOnTab = (ind: number): void => {\r\n    if (containerRef.current === null) return;\r\n    setTabIndex(ind);\r\n    const containerPos = containerRef.current.getBoundingClientRect().top;\r\n    const sectionPos = sectionsRef.current[ind].getBoundingClientRect().top;\r\n    const scrollValue = sectionPos - containerPos - SECTION_TOP_MARGIN;\r\n    containerRef.current.scrollBy({\r\n      top: scrollValue,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section className={styles.ingredients}>\r\n      <h1\r\n        className={`${styles.ingredients__title} text text_type_main-large mt-10 mb-5`}\r\n      >\r\n        Соберите бургер\r\n      </h1>\r\n      <BurgIngrTabs\r\n        sections={menuSections}\r\n        tabIndex={tabIndex}\r\n        onClick={handleClickOnTab}\r\n      />\r\n      <BurgIngrScroll\r\n        sections={menuSections}\r\n        sectionAnchor={sectionsRef}\r\n        containerAnchor={containerRef}\r\n        onScroll={setTabOnScroll}\r\n      />\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BurgerIngredients;\r\n","import { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\nimport { useSelector } from \"../../../hooks/reduxHooks\";\r\n\r\ninterface IBun {\r\n  type: \"top\" | \"bottom\" | undefined;\r\n  text: string;\r\n}\r\n\r\nconst Bun: FC<IBun> = ({ type, text }) => {\r\n  const bun = useSelector((store) => store.burgConstructor.bun);\r\n\r\n  if (bun === null) return <>{null}</>;\r\n  \r\n  return (\r\n    <ConstructorElement\r\n      type={type}\r\n      isLocked={true}\r\n      text={`${bun.name} (${text})`}\r\n      price={bun.price}\r\n      thumbnail={bun.image_mobile}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Bun;\r\n","import { TActionTemplate, TOrderSuccessPayload } from \"../../types/services\";\r\nimport { IMenuItem } from \"../../types/common\";\r\n\r\nexport const MENU_REQUEST = \"MENU_REQUEST\";\r\nexport const MENU_SUCCESS = \"MENU_SUCCESS\";\r\nexport const MENU_ERROR = \"MENU_ERROR\";\r\n\r\nexport const ADD_BUN = \"ADD_BUN\";\r\nexport const REMOVE_BUN = \"REMOVE_BUN\";\r\nexport const ADD_INGREDIENT = \"ADD_INGREDIENT\";\r\nexport const REMOVE_INGREDIENT = \"REMOVE_INGREDIENT\";\r\nexport const MOVE_INGREDIENT = \"MOVE_INGREDIENT\";\r\nexport const CLEAR_CONSTRUCTOR = \"CLEAR_CONSTRUCTOR\";\r\n\r\nexport const ORDER_REQUEST = \"ORDER_REQUEST\";\r\nexport const ORDER_SUCCESS = \"ORDER_SUCCESS\";\r\nexport const ORDER_ERROR = \"ORDER_ERROR\";\r\nexport const CLOSE_ORDER_DETAILS = \"CLOSE_ORDER_DETAILS\";\r\n\r\n// типы экшенов:\r\n\r\n// для menuReducer\r\ntype TMenuRequestAction = TActionTemplate<typeof MENU_REQUEST>;\r\n\r\ntype TMenuSuccessAction = Required<\r\n  TActionTemplate<typeof MENU_SUCCESS, IMenuItem[]>\r\n>;\r\n\r\ntype TMenuErrorAction = TActionTemplate<typeof MENU_ERROR>;\r\n\r\nexport type TMenuActions =\r\n  | TMenuRequestAction\r\n  | TMenuSuccessAction\r\n  | TMenuErrorAction;\r\n\r\n// для burgConstructorReducer\r\ntype TAddBunAction = Required<TActionTemplate<typeof ADD_BUN, IMenuItem>>;\r\n\r\ntype TRemoveBunAction = TActionTemplate<typeof REMOVE_BUN>;\r\n\r\ntype TAddIngredientAction = Required<\r\n  TActionTemplate<typeof ADD_INGREDIENT, IMenuItem>\r\n>;\r\n\r\ntype TRemoveIngredientAction = Required<\r\n  TActionTemplate<typeof REMOVE_INGREDIENT, number>\r\n>;\r\n\r\ntype TMoveIngredientAction = Required<\r\n  TActionTemplate<typeof MOVE_INGREDIENT, IMenuItem[]>\r\n>;\r\n\r\ntype TClearConstructorAction = TActionTemplate<typeof CLEAR_CONSTRUCTOR>;\r\n\r\nexport type TBurgConstructorActions =\r\n  | TAddBunAction\r\n  | TRemoveBunAction\r\n  | TAddIngredientAction\r\n  | TRemoveIngredientAction\r\n  | TMoveIngredientAction\r\n  | TClearConstructorAction;\r\n\r\n// для orderDetailsReducer\r\ntype TOrderRequestAction = Required<\r\n  TActionTemplate<typeof ORDER_REQUEST, IMenuItem[]>\r\n>;\r\n\r\ntype TOrderSuccessAction = Required<\r\n  TActionTemplate<typeof ORDER_SUCCESS, TOrderSuccessPayload>\r\n>;\r\n\r\ntype TOrderErrorAction = TActionTemplate<typeof ORDER_ERROR>;\r\n\r\ntype TCloseOrderDetailsAction = TActionTemplate<typeof CLOSE_ORDER_DETAILS>;\r\n\r\nexport type TOrderDetailsActions =\r\n  | TOrderRequestAction\r\n  | TOrderSuccessAction\r\n  | TOrderErrorAction\r\n  | TCloseOrderDetailsAction;\r\n","import styles from \"./ingredient.module.css\";\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useRef, FC } from \"react\";\r\nimport { dndTypes } from \"../../../utils/data\";\r\nimport { useDispatch, useSelector } from \"../../../hooks/reduxHooks\";\r\nimport {\r\n  REMOVE_INGREDIENT,\r\n  MOVE_INGREDIENT,\r\n} from \"../../../services/actions/main\";\r\nimport { useDrop, useDrag } from \"react-dnd\";\r\nimport { IMenuItem } from \"../../../types/common\";\r\n\r\ninterface IIngredient {\r\n  ind: number;\r\n  data: IMenuItem;\r\n}\r\n\r\nconst Ingredient: FC<IIngredient> = ({ ind, data }) => {\r\n  const ingredients = useSelector(\r\n    (store) => store.burgConstructor.ingredients\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const ingrRef = useRef<HTMLLIElement>(null);\r\n\r\n  const removeIngredient = (ind: number): void => {\r\n    dispatch({ type: REMOVE_INGREDIENT, payload: ind });\r\n  };\r\n\r\n  const [, drop] = useDrop({\r\n    accept: dndTypes.ingrConstructor,\r\n    hover(item: { index: number }) {\r\n      if (!ingrRef.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = ind;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      moveIngr(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n\r\n  const [{ isDragging }, drag] = useDrag({\r\n    type: dndTypes.ingrConstructor,\r\n    item: {\r\n      index: ind,\r\n    },\r\n    collect: (monitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const moveIngr = (dragIndex: number, hoverIndex: number) => {\r\n    const dragIngr = ingredients[dragIndex];\r\n    const stateCopy = [...ingredients];\r\n    const deletedHover = stateCopy.splice(hoverIndex, 1, dragIngr);\r\n    stateCopy.splice(dragIndex, 1, deletedHover[0]);\r\n    dispatch({ type: MOVE_INGREDIENT, payload: stateCopy });\r\n  };\r\n\r\n  const opacity = isDragging ? \"ingredient_hidden\" : \"\";\r\n\r\n  drag(drop(ingrRef));\r\n\r\n  return (\r\n    <li className={`${styles.ingredient} ${styles[opacity]}`} ref={ingrRef}>\r\n      <DragIcon type=\"primary\"/>\r\n      <ConstructorElement\r\n        text={data.name}\r\n        price={data.price}\r\n        thumbnail={data.image_mobile}\r\n        handleClose={() => removeIngredient(ind)}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Ingredient;","export default __webpack_public_path__ + \"static/media/modal-done.dc2f52b0.png\";","import styles from \"./order-details.module.css\";\r\nimport image from \"../../../images/modal-done.png\";\r\nimport { useSelector } from \"../../../hooks/reduxHooks\";\r\nimport { FC } from \"react\";\r\n\r\nconst OrderDetails: FC = () => {\r\n  const number = useSelector(\r\n    (store) => store.orderDetails?.orderRes?.order?.number\r\n  );\r\n\r\n  return (\r\n    <div className={styles.details}>\r\n      <p className={`${styles.details__order} text text_type_digits-large`}>\r\n        {number}\r\n      </p>\r\n      <p\r\n        className={`${styles.details__text} mt-8 mb-15 text text_type_main-medium`}\r\n      >\r\n        идентификатор заказа\r\n      </p>\r\n      <img src={image} alt=\"Заказ подтвержден\" />\r\n      <p\r\n        className={`${styles.details__text} mt-15 mb-2 text text_type_main-default`}\r\n      >\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p\r\n        className={`${styles.details__text} text text_type_main-default text_color_inactive`}\r\n      >\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import { BASE_URL_API } from \"./data\";\r\nimport { IAllInputs } from \"../types/common\";\r\nimport {\r\n  ICommonResBody,\r\n  IGetMenuRes,\r\n  IPostOrderRes,\r\n  IAuthRes,\r\n  IUserRes,\r\n  IRefreshTokenRes,\r\n} from \"../types/api-responses\";\r\nimport { setCookie } from \"../utils/utils\";\r\nimport { cookiesSettings } from \"../utils/data\";\r\n\r\ninterface IApiOptions {\r\n  readonly _headers: { \"Content-type\": string };\r\n  readonly _baseUrl: string;\r\n}\r\n\r\ntype TJsonRes<T> = {\r\n  ok: boolean;\r\n  status: number;\r\n  body: T;\r\n};\r\n\r\nconst options: IApiOptions = {\r\n  _headers: { \"Content-type\": \"application/json\" },\r\n  _baseUrl: BASE_URL_API,\r\n};\r\n\r\nclass ApiRequests implements IApiOptions {\r\n  readonly _headers: { \"Content-type\": string };\r\n  readonly _baseUrl: string;\r\n\r\n  constructor(options: IApiOptions) {\r\n    this._headers = options._headers;\r\n    this._baseUrl = options._baseUrl;\r\n  }\r\n\r\n  private _handleResToJson<T>(res: Response): Promise<TJsonRes<T>> {\r\n    return res.json().then((jsonRes: T) => ({\r\n      ok: res.ok,\r\n      status: res.status,\r\n      body: jsonRes,\r\n    }));\r\n  }\r\n\r\n  private _handleResponse<T extends { message?: string }>(\r\n    res: TJsonRes<T>\r\n  ): T | Promise<never> {\r\n    if (res.ok) {\r\n      return res.body;\r\n    }\r\n    return Promise.reject({\r\n      status: res.status,\r\n      message: res.body.message,\r\n    });\r\n  }\r\n\r\n  getMenu() {\r\n    return fetch(`${this._baseUrl}/ingredients`)\r\n      .then((res) => this._handleResToJson<IGetMenuRes>(res))\r\n      .then((res) => this._handleResponse<IGetMenuRes>(res));\r\n  }\r\n\r\n  postOrder(data: { ingredients: string[] }, token: string | undefined) {\r\n    return fetch(`${this._baseUrl}/orders`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._handleResToJson<IPostOrderRes>(res))\r\n      .then((res) => this._handleResponse<IPostOrderRes>(res));\r\n  }\r\n\r\n  confirmEmail(email: Pick<IAllInputs<string>, \"email\">) {\r\n    return fetch(`${this._baseUrl}/password-reset`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(email),\r\n    })\r\n      .then((res) => this._handleResToJson<ICommonResBody>(res))\r\n      .then((res) => this._handleResponse<ICommonResBody>(res));\r\n  }\r\n\r\n  resetPassword(data: Pick<IAllInputs<string>, \"password\" | \"token\">) {\r\n    return fetch(`${this._baseUrl}/password-reset/reset`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._handleResToJson<ICommonResBody>(res))\r\n      .then((res) => this._handleResponse<ICommonResBody>(res));\r\n  }\r\n\r\n  login(data: Pick<IAllInputs<string>, \"email\" | \"password\">) {\r\n    return fetch(`${this._baseUrl}/auth/login`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._handleResToJson<IAuthRes>(res))\r\n      .then((res) => this._handleResponse<IAuthRes>(res));\r\n  }\r\n\r\n  register(data: Pick<IAllInputs<string>, \"email\" | \"password\" | \"name\">) {\r\n    return fetch(`${this._baseUrl}/auth/register`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._handleResToJson<IAuthRes>(res))\r\n      .then((res) => this._handleResponse<IAuthRes>(res));\r\n  }\r\n\r\n  logout(token: string | undefined) {\r\n    return fetch(`${this._baseUrl}/auth/logout`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ token }),\r\n    })\r\n      .then((res) => this._handleResToJson<ICommonResBody>(res))\r\n      .then((res) => this._handleResponse<ICommonResBody>(res));\r\n  }\r\n\r\n  refreshToken(token: string | undefined) {\r\n    return fetch(`${this._baseUrl}/auth/token`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ token }),\r\n    })\r\n      .then((res) => this._handleResToJson<IRefreshTokenRes>(res))\r\n      .then((res) => {\r\n        const { accessToken, refreshToken } = cookiesSettings;\r\n        setCookie(\r\n          accessToken.name,\r\n          res.body.accessToken.replace(\"Bearer \", \"\"),\r\n          accessToken.options\r\n        );\r\n        setCookie(\r\n          refreshToken.name,\r\n          res.body.refreshToken,\r\n          refreshToken.options\r\n        );\r\n      });\r\n  }\r\n\r\n  getUser(token: string | undefined) {\r\n    return fetch(`${this._baseUrl}/auth/user`, {\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => this._handleResToJson<IUserRes>(res))\r\n      .then((res) => this._handleResponse<IUserRes>(res));\r\n  }\r\n\r\n  patchUser(\r\n    token: string | undefined,\r\n    data: Partial<Pick<IAllInputs<string>, \"email\" | \"password\" | \"name\">>\r\n  ) {\r\n    return fetch(`${this._baseUrl}/auth/user`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((res) => this._handleResToJson<IUserRes>(res))\r\n      .then((res) => this._handleResponse<IUserRes>(res));\r\n  }\r\n}\r\n\r\nexport const apiRequests = new ApiRequests(options);\r\n","import {\r\n  MENU_REQUEST,\r\n  MENU_SUCCESS,\r\n  MENU_ERROR,\r\n  ORDER_REQUEST,\r\n  ORDER_SUCCESS,\r\n  ORDER_ERROR,\r\n  CLEAR_CONSTRUCTOR,\r\n} from \"../actions/main\";\r\nimport { ALERT_ERROR } from \"../actions/interaction\";\r\nimport { apiRequests } from \"../../utils/api-requests\";\r\nimport { setOrderRequestBody } from \"../../utils/utils\";\r\nimport { batch } from \"react-redux\";\r\nimport { TAppThunk, TAppDispatch } from \"../../types/services\";\r\nimport { IMenuItem } from \"../../types/common\";\r\nimport { TErrorAlertPayload } from \"../../types/services\";\r\nimport { getCookie } from \"../../utils/utils\";\r\n\r\nexport const getMenu: TAppThunk = () => (dispatch: TAppDispatch) => {\r\n  dispatch({ type: MENU_REQUEST });\r\n  return apiRequests\r\n    .getMenu()\r\n    .then((res) => {\r\n      if (res.success) {\r\n        dispatch({ type: MENU_SUCCESS, payload: res.data });\r\n      } else {\r\n        throw new Error(\"Произошла ошибка\");\r\n      }\r\n    })\r\n    .catch((err: TErrorAlertPayload) => {\r\n      dispatch({ type: MENU_ERROR });\r\n      console.log(`Error ${err.status ?? \"\"}: ${err.message}`);\r\n    });\r\n};\r\n\r\n// Thunk для отправки заказа\r\n\r\nconst _reusePostOrder = (dispatch: TAppDispatch, order: IMenuItem[]) => {\r\n  return apiRequests\r\n    .postOrder(setOrderRequestBody(order), getCookie(\"accessToken\"))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        batch(() => {\r\n          dispatch({ type: ORDER_SUCCESS, payload: res });\r\n          dispatch({ type: CLEAR_CONSTRUCTOR });\r\n        });\r\n      } else {\r\n        throw new Error(\"Ошибка получения данных\");\r\n      }\r\n    });\r\n};\r\n\r\nconst _reusePostOrderError = (\r\n  dispatch: TAppDispatch,\r\n  err: TErrorAlertPayload\r\n) => {\r\n  batch(() => {\r\n    dispatch({ type: ORDER_ERROR });\r\n    dispatch({ type: ALERT_ERROR, payload: err });\r\n  });\r\n};\r\n\r\nexport const postOrder: TAppThunk =\r\n  (order: IMenuItem[]) => async (dispatch: TAppDispatch) => {\r\n    dispatch({ type: ORDER_REQUEST, payload: order });\r\n\r\n    try {\r\n      await _reusePostOrder(dispatch, order);\r\n    } catch (err: any) {\r\n      if (err.message === \"jwt expired\") {\r\n        try {\r\n          await apiRequests.refreshToken(getCookie(\"refreshToken\"));\r\n          await _reusePostOrder(dispatch, order);\r\n        } catch (err: any) {\r\n          _reusePostOrderError(dispatch, err);\r\n        }\r\n      } else {\r\n        _reusePostOrderError(dispatch, err);\r\n      }\r\n    }\r\n  };\r\n","import styles from \"./burger-constructor.module.css\";\r\nimport Bun from \"./bun/bun\";\r\nimport Ingredient from \"./ingredient/ingredient\";\r\nimport Modal from \"../modal/modal\";\r\nimport OrderDetails from \"../modal/order-details/order-details\";\r\nimport {\r\n  CurrencyIcon,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { memo, useCallback, useMemo, FC, SyntheticEvent } from \"react\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { postOrder } from \"../../services/thunks/main\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport {\r\n  ADD_BUN,\r\n  ADD_INGREDIENT,\r\n  CLOSE_ORDER_DETAILS,\r\n} from \"../../services/actions/main\";\r\nimport { SHOW_ALERT } from \"../../services/actions/interaction\";\r\nimport { setTotalPrice, generateId } from \"../../utils/utils\";\r\nimport { dndTypes } from \"../../utils/data\";\r\nimport { useNavigate, useLocation } from \"react-router\";\r\nimport { IMenuItem } from \"../../types/common\";\r\n\r\nconst BurgerConstructor: FC = memo(() => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const { isAuthorized } = useSelector((state) => state.userData);\r\n  const { ingredients, bun, empty } = useSelector(\r\n    (store) => store.burgConstructor\r\n  );\r\n  const { isModalOpen, canSubmit } = useSelector(\r\n    (store) => store.orderDetails\r\n  );\r\n  const dispatch = useDispatch();\r\n\r\n  const [, dropTarget] = useDrop({\r\n    accept: dndTypes.burgIngredient,\r\n    drop(cardData: IMenuItem) {\r\n      handleDrop(cardData);\r\n    },\r\n  });\r\n\r\n  const handleDrop = (cardData: IMenuItem): void => {\r\n    cardData.type === \"bun\"\r\n      ? dispatch({ type: ADD_BUN, payload: cardData })\r\n      : dispatch({\r\n          type: ADD_INGREDIENT,\r\n          payload: { ...cardData, uniqueId: generateId() },\r\n        });\r\n  };\r\n\r\n  const totalPrice = useMemo(\r\n    () => setTotalPrice(bun, ingredients),\r\n    [bun, ingredients]\r\n  );\r\n\r\n  const submitOrder = (e: SyntheticEvent): void => {\r\n    e.preventDefault();\r\n    if (!isAuthorized) {\r\n      return navigate(\"/login\", { state: { from: location.pathname } });\r\n    }\r\n    if (!canSubmit) return;\r\n    if (!bun) {\r\n      dispatch({\r\n        type: SHOW_ALERT,\r\n        payload: \"Кажется, вы забыли булку...\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    dispatch(postOrder([bun, ...ingredients]));\r\n  };\r\n\r\n  const closeModal = useCallback(() => {\r\n    dispatch({ type: CLOSE_ORDER_DETAILS });\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <section\r\n      className={`${styles.constructor} pt-25 pr-2 pl-4 ml-10`}\r\n      ref={dropTarget}\r\n    >\r\n      {empty && (\r\n        <p\r\n          className={`${styles.constructor__text} text text_type_main-medium text_color_inactive`}\r\n        >\r\n          {`Выберите ингредиенты и перетащите\\n в данное поле`}\r\n        </p>\r\n      )}\r\n      {!empty && (\r\n        <>\r\n          <div className={styles.constructor__container}>\r\n            {bun && <Bun type=\"top\" text=\"верх\" />}\r\n            <ul className={`${styles.constructor__scroll} mt-4 mb-4`}>\r\n              {ingredients.map((i: IMenuItem, ind: number) => (\r\n                <Ingredient key={i.uniqueId} data={i} ind={ind} />\r\n              ))}\r\n            </ul>\r\n            {bun && <Bun type=\"bottom\" text=\"низ\" />}\r\n          </div>\r\n          <div className={`${styles.constructor__confirm} mt-10`}>\r\n            <div className={`${styles.constructor__price} mr-10`}>\r\n              <span\r\n                className={`${\r\n                  styles[`constructor__price-value`]\r\n                } text text_type_digits-default`}\r\n              >\r\n                {totalPrice}\r\n              </span>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n            <Button type=\"primary\" size=\"medium\" onClick={submitOrder}>\r\n              Оформить заказ\r\n            </Button>\r\n          </div>\r\n        </>\r\n      )}\r\n      {isModalOpen && (\r\n        <Modal onClose={closeModal} mod=\"pb-30\">\r\n          <OrderDetails />\r\n        </Modal>\r\n      )}\r\n    </section>\r\n  );\r\n});\r\n\r\nexport default BurgerConstructor;\r\n","import BurgerIngredients from \"../../components/burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructor from \"../../components/burger-constructor/burger-constructor\";\r\nimport { FC } from \"react\";\r\n\r\nconst MainPage: FC = () => {\r\n  return (\r\n    <>\r\n      <BurgerIngredients />\r\n      <BurgerConstructor />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n","import styles from \"./container.module.css\";\r\nimport { FC } from \"react\";\r\n\r\ninterface IContainer {\r\n  mod?: string;\r\n}\r\n\r\nconst Container: FC<IContainer> = ({ children, mod = \"\" }) => {\r\n  return <div className={`${styles.container} ${mod}`}>{children}</div>;\r\n};\r\n\r\nexport default Container;\r\n","import styles from \"./form.module.css\";\r\nimport { Children, FC, SyntheticEvent } from \"react\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ninterface IForm {\r\n  onSubmit: (e: SyntheticEvent) => void;\r\n  title: string;\r\n  btnName?: string;\r\n}\r\n\r\nconst Form: FC<IForm> = ({ children, onSubmit, title, btnName }) => {\r\n  const childrenArr = Children.toArray(children) as React.ReactElement[];\r\n\r\n  return (\r\n    <form className={`${styles.form} pb-20`} onSubmit={onSubmit}>\r\n      <h2 className={`${styles.form__title} text text_type_main-medium`}>\r\n        {title}\r\n      </h2>\r\n      <ul className={`${styles.form__list} mt-6 mb-6`}>\r\n        {childrenArr.map((child) => (\r\n          <li\r\n            className={`${styles.form__input} mb-6`}\r\n            key={child.key}\r\n          >\r\n            {child}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <Button type=\"primary\" size=\"medium\">\r\n        {btnName}\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import styles from \"./paragraph-link.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FC } from \"react\";\r\n\r\ninterface IParagraphLink {\r\n  link: string;\r\n  to: string;\r\n  mod?: string;\r\n}\r\n\r\nconst ParagraphLink: FC<IParagraphLink> = ({\r\n  children,\r\n  link,\r\n  to,\r\n  mod = \"\",\r\n}) => {\r\n  return (\r\n    <div\r\n      className={`${styles.container} text text_type_main-default text_color_inactive ${mod}`}\r\n    >\r\n      <p className={styles[`paragraph-link`]}>{children}</p>\r\n      <Link to={to} className={styles.link}>\r\n        {link}\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ParagraphLink;\r\n","import { useRef, useState, FC} from \"react\";\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { ICustomInput } from \"../../../types/common\";\r\n\r\nconst validateEmail = (email: string): boolean => {\r\n  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return re.test(email);\r\n};\r\n\r\nconst EmailInput: FC<ICustomInput> = ({\r\n  value,\r\n  onChange,\r\n  name,\r\n  icon,\r\n  placeholder = \"E-mail\",\r\n  size = \"default\",\r\n  disabled = false,\r\n  error,\r\n  setError,\r\n}) => {\r\n  const [fieldDisabled, setDisabled] = useState<boolean>(disabled);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = (): void => {\r\n    setDisabled(false);\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const validateField = (value: string): void => {\r\n    setError((prev) => ({ ...prev, [name]: !validateEmail(value) }));\r\n  };\r\n\r\n  const onFocus = (): void => {\r\n    setError((prev) => ({ ...prev, [name]: false }));\r\n  };\r\n\r\n  const onBlur = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n    if (e.target.value) {\r\n      validateField(e.target.value);\r\n    } else {\r\n      setError((prev) => ({ ...prev, [name]: false }));\r\n    }\r\n    if (disabled) {\r\n      setDisabled(true);\r\n    }\r\n  };\r\n  return (\r\n    <Input\r\n      type=\"email\"\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={icon}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      disabled={fieldDisabled}\r\n      onIconClick={onIconClick}\r\n      errorText={value === \"\" ? \"Укажите Ваш email\" : \"Ой, произошла ошибка!\"}\r\n      size={size}\r\n    />\r\n  );\r\n};\r\n\r\nexport default EmailInput;\r\n","import { useMemo, useRef, useState, FC } from \"react\";\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { ICustomInput } from \"../../../types/common\";\r\n\r\nconst PasswordInput: FC<ICustomInput> = ({\r\n  value,\r\n  onChange,\r\n  name,\r\n  icon,\r\n  placeholder = \"Пароль\",\r\n  disabled = false,\r\n  size = \"default\",\r\n  error,\r\n  setError,\r\n}) => {\r\n  const [fieldDisabled, setDisabled] = useState<boolean>(disabled);\r\n  const [visible, setVisible] = useState<boolean>(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const iconType = useMemo(() => {\r\n    if (icon) {\r\n      return icon;\r\n    } else if (!visible) {\r\n      return \"HideIcon\";\r\n    } else {\r\n      return \"ShowIcon\";\r\n    }\r\n  }, [icon, visible]);\r\n\r\n  const onIconClick = (): void => {\r\n    if (iconType === \"EditIcon\") {\r\n      setDisabled(false);\r\n    }\r\n    if (iconType === \"HideIcon\") {\r\n      setVisible(true);\r\n    }\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const validateField = (value: string): void => {\r\n    setError((prev) => ({ ...prev, [name]: value.length < 6 }));\r\n  };\r\n\r\n  const onFocus = (): void => {\r\n    setError((prev) => ({ ...prev, [name]: false }));\r\n  };\r\n\r\n  const onBlur = (e: React.FocusEvent<HTMLInputElement>): void => {\r\n    if (e.target.value) {\r\n      validateField(e.target.value);\r\n    } else {\r\n      setError((prev) => ({ ...prev, [name]: false }));\r\n    }\r\n    if (iconType === \"EditIcon\") {\r\n      setDisabled(true);\r\n    }\r\n    if (iconType === \"ShowIcon\") {\r\n      setVisible(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type={visible ? \"text\" : \"password\"}\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={iconType}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      disabled={fieldDisabled}\r\n      onIconClick={onIconClick}\r\n      errorText={value === \"\" ? \"Введите пароль\" : \"Некорректный пароль\"}\r\n      size={size}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PasswordInput;\r\n","import { TActionTemplate } from \"../../types/services\";\r\nexport const START_REQUEST = \"START_REQUEST\";\r\nexport const END_REQUEST = \"END_REQUEST\";\r\n\r\n// типы экшенов:\r\n\r\n// для requestReducer\r\ntype TStartRequestAction = TActionTemplate<typeof START_REQUEST>;\r\n\r\ntype TEndRequestAction = TActionTemplate<typeof END_REQUEST>;\r\n\r\nexport type TRequestActions = TStartRequestAction | TEndRequestAction;\r\n","import { TActionTemplate, TUserSuccessPayload } from \"../../types/services\";\r\n\r\nexport const USER_REQUEST = \"USER_REQUEST\";\r\nexport const USER_SUCCESS = \"USER_SUCCESS\";\r\nexport const USER_ERROR = \"USER_ERROR\";\r\n\r\nexport const UPDATE_USER_REQUEST = \"UPDATE_USER_REQUEST\";\r\nexport const UPDATE_USER_SUCCESS = \"UPDATE_USER_SUCCESS\";\r\nexport const UPDATE_USER_ERROR = \"UPDATE_USER_ERROR\";\r\n\r\nexport const LOGOUT_REQUEST = \"LOGOUT_REQUEST\";\r\nexport const LOGOUT = \"LOGOUT\";\r\n\r\n// типы экшенов:\r\n\r\n// для userDataReducer\r\ntype TUserRequestAction = TActionTemplate<typeof USER_REQUEST>;\r\n\r\ntype TUserSuccessAction = Required<\r\n  TActionTemplate<typeof USER_SUCCESS, TUserSuccessPayload>\r\n>;\r\n\r\ntype TUserErrorAction = TActionTemplate<typeof USER_ERROR>;\r\n\r\ntype TUpdateUserRequestAction = TActionTemplate<typeof UPDATE_USER_REQUEST>;\r\n\r\ntype TUpdateUserSuccessAction = Required<\r\n  TActionTemplate<typeof UPDATE_USER_SUCCESS, TUserSuccessPayload>\r\n>;\r\n\r\ntype TUpdateUserErrorAction = TActionTemplate<typeof UPDATE_USER_ERROR>;\r\n\r\ntype TLogoutRequestAction = TActionTemplate<typeof LOGOUT_REQUEST>;\r\n\r\ntype TLogoutAction = TActionTemplate<typeof LOGOUT>;\r\n\r\nexport type TUserDataActions =\r\n  | TUserRequestAction\r\n  | TUserSuccessAction\r\n  | TUserErrorAction\r\n  | TUpdateUserRequestAction\r\n  | TUpdateUserSuccessAction\r\n  | TUpdateUserErrorAction\r\n  | TLogoutRequestAction\r\n  | TLogoutAction;\r\n","import {\r\n  USER_REQUEST,\r\n  USER_SUCCESS,\r\n  USER_ERROR,\r\n  UPDATE_USER_REQUEST,\r\n  UPDATE_USER_SUCCESS,\r\n  UPDATE_USER_ERROR,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT,\r\n} from \"../actions/user\";\r\nimport { apiRequests } from \"../../utils/api-requests\";\r\nimport { getCookie, deleteCookie } from \"../../utils/utils\";\r\nimport {\r\n  TAppThunk,\r\n  TAppDispatch,\r\n  TErrorAlertPayload,\r\n} from \"../../types/services\";\r\nimport { IAllInputs } from \"../../types/common\";\r\n\r\n// Thunk для получения user\r\nconst _reuseGetUser = (dispatch: TAppDispatch) => {\r\n  return apiRequests.getUser(getCookie(\"accessToken\")).then((res) => {\r\n    if (res.success) {\r\n      dispatch({ type: USER_SUCCESS, payload: res.user });\r\n    } else {\r\n      throw new Error(\"Ошибка получения данных\");\r\n    }\r\n  });\r\n};\r\n\r\nconst _reuseUserError = (dispatch: TAppDispatch, err: TErrorAlertPayload) => {\r\n  dispatch({ type: USER_ERROR });\r\n  console.log(`Error ${err.status ?? \"\"}: ${err.message}`);\r\n};\r\n\r\nexport const getUser: TAppThunk = () => async (dispatch: TAppDispatch) => {\r\n  dispatch({ type: USER_REQUEST });\r\n  try {\r\n    await _reuseGetUser(dispatch);\r\n  } catch (err: any) {\r\n    if (err.message === \"jwt expired\") {\r\n      try {\r\n        await apiRequests.refreshToken(getCookie(\"refreshToken\"));\r\n        await _reuseGetUser(dispatch);\r\n      } catch (err: any) {\r\n        _reuseUserError(dispatch, err);\r\n      }\r\n    } else {\r\n      _reuseUserError(dispatch, err);\r\n    }\r\n  }\r\n};\r\n\r\n// Thunk для обновления user\r\nconst _reusePatchUser = (dispatch: TAppDispatch, data: IAllInputs<string>) => {\r\n  return apiRequests.patchUser(getCookie(\"accessToken\"), data).then((res) => {\r\n    if (res.success) {\r\n      dispatch({ type: UPDATE_USER_SUCCESS, payload: res.user });\r\n    } else {\r\n      throw new Error(\"Ошибка получения данных\");\r\n    }\r\n  });\r\n};\r\n\r\nconst _reusePatchUserError = (\r\n  dispatch: TAppDispatch,\r\n  err: TErrorAlertPayload\r\n) => {\r\n  dispatch({ type: UPDATE_USER_ERROR });\r\n  console.log(`Error ${err.status ?? \"\"}: ${err.message}`);\r\n};\r\n\r\nexport const patchUser: TAppThunk =\r\n  (data: IAllInputs<string>) => async (dispatch: TAppDispatch) => {\r\n    dispatch({ type: UPDATE_USER_REQUEST });\r\n    try {\r\n      await _reusePatchUser(dispatch, data);\r\n    } catch (err: any) {\r\n      if (err.message === \"jwt expired\") {\r\n        try {\r\n          await apiRequests.refreshToken(getCookie(\"refreshToken\"));\r\n          await _reusePatchUser(dispatch, data);\r\n        } catch (err: any) {\r\n          _reusePatchUserError(dispatch, err);\r\n        }\r\n      } else {\r\n        _reusePatchUserError(dispatch, err);\r\n      }\r\n    }\r\n  };\r\n\r\n// Выход из профиля\r\nexport const logout: TAppThunk = () => (dispatch: TAppDispatch) => {\r\n  dispatch({ type: LOGOUT_REQUEST });\r\n  return apiRequests\r\n    .logout(getCookie(\"refreshToken\"))\r\n    .then((res) => {\r\n      if (res.success) {\r\n        console.log(\"Выход из аккаунта успешный\");\r\n      } else {\r\n        throw new Error(\"Произошла ошибка\");\r\n      }\r\n    })\r\n    .catch((err: TErrorAlertPayload) => {\r\n      console.log(`Error ${err.status ?? \"\"}: ${err.message}`);\r\n    })\r\n    .finally(() => {\r\n      deleteCookie(\"refreshToken\", \"accessToken\");\r\n      dispatch({ type: LOGOUT });\r\n    });\r\n};\r\n","import { FC, useState } from \"react\";\r\nimport Container from \"../../components/generic/container/container\";\r\nimport Form from \"../../components/generic/form/form\";\r\nimport ParagraphLink from \"../../components/generic/paragraph-link/paragraph-link\";\r\nimport EmailInput from \"../../components/generic/email-input/email-input\";\r\nimport PasswordInput from \"../../components/generic/password-input/password-input\";\r\nimport {\r\n  hasEmptyInput,\r\n  hasErrorInput,\r\n  setErrInEmptyInput,\r\n} from \"../../utils/utils\";\r\nimport { useDispatch, useSelector } from \"../../hooks/reduxHooks\";\r\nimport { login } from \"../../services/thunks/requests\";\r\nimport { useLocation, Navigate } from \"react-router\";\r\nimport { ErrorSetter, IAllInputs } from \"../../types/common\";\r\n\r\ntype TInputValue<T> = Required<Pick<IAllInputs<T>, \"email\" | \"password\">>;\r\n\r\nconst LoginPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const { isAuthorized, wasInitialAuth } = useSelector(\r\n    (state) => state.userData\r\n  );\r\n  const isRequest = useSelector((state) => state.request.isRequest);\r\n\r\n  const [inputValue, setInputValue] = useState<TInputValue<string>>({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [error, setError] = useState<TInputValue<boolean>>({\r\n    email: false,\r\n    password: false,\r\n  });\r\n  const setErr = setError as ErrorSetter;\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setInputValue({ ...inputValue, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    if (hasEmptyInput(inputValue)) {\r\n      setErr((prev) => ({\r\n        ...prev,\r\n        ...setErrInEmptyInput(inputValue),\r\n      }));\r\n      return;\r\n    }\r\n    if (isRequest || hasErrorInput(error)) return;\r\n\r\n    dispatch(login(inputValue));\r\n  };\r\n\r\n  if (isAuthorized) {\r\n    return <Navigate to={location.state ? location.state?.from : \"/\"} />;\r\n  } else if (!wasInitialAuth) {\r\n    return <>{null}</>;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Form btnName=\"Войти\" title=\"Вход\" onSubmit={handleSubmit}>\r\n        <EmailInput\r\n          onChange={onChange}\r\n          value={inputValue.email}\r\n          name={\"email\"}\r\n          error={error.email}\r\n          setError={setErr}\r\n        />\r\n        <PasswordInput\r\n          onChange={onChange}\r\n          value={inputValue.password}\r\n          name={\"password\"}\r\n          error={error.password}\r\n          setError={setErr}\r\n        />\r\n      </Form>\r\n      <ParagraphLink link=\"Зарегистрироваться\" to=\"/register\" mod=\"mb-4\">\r\n        Вы — новый пользователь?\r\n      </ParagraphLink>\r\n      <ParagraphLink link=\"Восстановить пароль\" to=\"/forgot-password\">\r\n        Забыли пароль?\r\n      </ParagraphLink>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import { START_REQUEST, END_REQUEST } from \"../actions/requests\";\r\nimport { ALERT_ERROR, SHOW_ALERT } from \"../actions/interaction\";\r\nimport { apiRequests } from \"../../utils/api-requests\";\r\nimport { cookiesSettings } from \"../../utils/data\";\r\nimport { setCookie } from \"../../utils/utils\";\r\nimport { getUser } from \"./user\";\r\nimport {\r\n  TAppThunk,\r\n  TAppDispatch,\r\n  TErrorAlertPayload,\r\n} from \"../../types/services\";\r\nimport { IAllInputs } from \"../../types/common\";\r\nimport { NavigateFunction } from \"react-router-dom\";\r\n\r\nexport const register: TAppThunk =\r\n  (data: IAllInputs<string>, confirm: (text: string) => Promise<boolean>) =>\r\n  (dispatch: TAppDispatch | TAppThunk<void>) => {\r\n    dispatch({ type: START_REQUEST });\r\n    return apiRequests\r\n      .register(data)\r\n      .then(async (res) => {\r\n        if (res.success) {\r\n          const isConfirmed = await confirm(\r\n            \"Вы успешно зарегистрировались! \\n Желаете войти?\"\r\n          );\r\n          if (isConfirmed) {\r\n            const { accessToken, refreshToken } = cookiesSettings;\r\n            setCookie(\r\n              accessToken.name,\r\n              res.accessToken.replace(\"Bearer \", \"\"),\r\n              accessToken.options\r\n            );\r\n            setCookie(\r\n              refreshToken.name,\r\n              res.refreshToken,\r\n              refreshToken.options\r\n            );\r\n            dispatch(getUser());\r\n          } else {\r\n            return;\r\n          }\r\n        } else {\r\n          throw new Error(\"Произошла ошибка\");\r\n        }\r\n      })\r\n      .catch((err: TErrorAlertPayload) =>\r\n        dispatch({ type: ALERT_ERROR, payload: err })\r\n      )\r\n      .finally(() => dispatch({ type: END_REQUEST }));\r\n  };\r\n\r\nexport const login: TAppThunk =\r\n  (data: IAllInputs<string>) => (dispatch: TAppDispatch | TAppThunk<void>) => {\r\n    dispatch({ type: START_REQUEST });\r\n    return apiRequests\r\n      .login(data)\r\n      .then((res) => {\r\n        if (res.success) {\r\n          const { accessToken, refreshToken } = cookiesSettings;\r\n          setCookie(\r\n            accessToken.name,\r\n            res.accessToken.replace(\"Bearer \", \"\"),\r\n            accessToken.options\r\n          );\r\n          setCookie(refreshToken.name, res.refreshToken, refreshToken.options);\r\n          dispatch(getUser());\r\n        } else {\r\n          throw new Error(\"Произошла ошибка\");\r\n        }\r\n      })\r\n      .catch((err: TErrorAlertPayload) =>\r\n        dispatch({ type: ALERT_ERROR, payload: err })\r\n      )\r\n      .finally(() => dispatch({ type: END_REQUEST }));\r\n  };\r\n\r\nexport const confirmEmail: TAppThunk =\r\n  (data: IAllInputs<string>, navigate: NavigateFunction) =>\r\n  (dispatch: TAppDispatch) => {\r\n    dispatch({ type: START_REQUEST });\r\n    return apiRequests\r\n      .confirmEmail(data)\r\n      .then((res) => {\r\n        if (res.success) {\r\n          navigate(\"/reset-password\", { state: { from: \"/reset-password\" } });\r\n        } else {\r\n          throw new Error(\"Произошла Ошибка\");\r\n        }\r\n      })\r\n      .catch((err: TErrorAlertPayload) => {\r\n        dispatch({ type: ALERT_ERROR, payload: err });\r\n      })\r\n      .finally(() => dispatch({ type: END_REQUEST }));\r\n  };\r\n\r\nexport const resetPassword: TAppThunk =\r\n  (data: IAllInputs<string>) => (dispatch: TAppDispatch) => {\r\n    dispatch({ type: START_REQUEST });\r\n    return apiRequests\r\n      .resetPassword(data)\r\n      .then((res) => {\r\n        if (res.success) {\r\n          dispatch({\r\n            type: SHOW_ALERT,\r\n            payload: \"Пароль успешно изменён\",\r\n          });\r\n        } else {\r\n          throw new Error(\"Произошла ошибка\");\r\n        }\r\n      })\r\n      .catch((err: TErrorAlertPayload) =>\r\n        dispatch({ type: ALERT_ERROR, payload: err })\r\n      )\r\n      .finally(() => dispatch({ type: END_REQUEST }));\r\n  };\r\n","import { useRef, useState, FC } from \"react\";\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { ICustomInput } from \"../../../types/common\";\r\n\r\nconst TextInput: FC<ICustomInput> = ({\r\n  value,\r\n  onChange,\r\n  name,\r\n  icon,\r\n  placeholder = \"Имя\",\r\n  size = \"default\",\r\n  disabled = false,\r\n  error,\r\n  setError,\r\n}) => {\r\n  const [fieldDisabled, setDisabled] = useState<boolean>(disabled);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const onIconClick = (): void => {\r\n    setDisabled(false);\r\n    setTimeout(() => inputRef.current?.focus(), 0);\r\n  };\r\n\r\n  const onFocus = (): void => {\r\n    setError((prev) => ({ ...prev, [name]: false }));\r\n  };\r\n\r\n  const onBlur = (): void => {\r\n    if (disabled) {\r\n      setDisabled(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      type=\"text\"\r\n      placeholder={placeholder}\r\n      onChange={onChange}\r\n      icon={icon}\r\n      value={value}\r\n      ref={inputRef}\r\n      onBlur={onBlur}\r\n      onFocus={onFocus}\r\n      name={name}\r\n      error={error}\r\n      disabled={fieldDisabled}\r\n      onIconClick={onIconClick}\r\n      errorText={\r\n        value === \"\" ? \"Заполните поле ввода\" : \"Ой, произошла ошибка!\"\r\n      }\r\n      size={size}\r\n    />\r\n  );\r\n};\r\n\r\nexport default TextInput;\r\n","import styles from \"./confirm.module.css\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { FC } from \"react\";\r\n\r\ninterface IConfirm {\r\n  text: string;\r\n  btnTrue: string;\r\n  btnFalse: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nconst Confirm: FC<IConfirm> = ({\r\n  text,\r\n  btnTrue,\r\n  btnFalse,\r\n  onConfirm,\r\n  onCancel,\r\n}) => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <p className={`${styles.text} mb-15 text text_type_main-medium`}>\r\n        {text}\r\n      </p>\r\n      <div className={styles.buttons}>\r\n        <Button type=\"secondary\" size=\"medium\" onClick={onCancel}>\r\n          {btnFalse}\r\n        </Button>\r\n        <Button type=\"primary\" size=\"medium\" onClick={onConfirm}>\r\n          {btnTrue}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Confirm;\r\n","import { FC, useState } from \"react\";\r\nimport Container from \"../../components/generic/container/container\";\r\nimport Form from \"../../components/generic/form/form\";\r\nimport ParagraphLink from \"../../components/generic/paragraph-link/paragraph-link\";\r\nimport EmailInput from \"../../components/generic/email-input/email-input\";\r\nimport PasswordInput from \"../../components/generic/password-input/password-input\";\r\nimport TextInput from \"../../components/generic/text-input/text-input\";\r\nimport {\r\n  hasEmptyInput,\r\n  hasErrorInput,\r\n  setErrInEmptyInput,\r\n} from \"../../utils/utils\";\r\nimport { register } from \"../../services/thunks/requests\";\r\nimport { useDispatch, useSelector } from \"../../hooks/reduxHooks\";\r\nimport { useLocation, Navigate } from \"react-router\";\r\nimport Modal from \"../../components/modal/modal\";\r\nimport Confirm from \"../../components/modal/confirm/confirm\";\r\nimport useConfirm from \"../../hooks/useConfirm\";\r\nimport { ErrorSetter, IAllInputs } from \"../../types/common\";\r\n\r\ntype TInputValue<T> = Required<\r\n  Pick<IAllInputs<T>, \"name\" | \"email\" | \"password\">\r\n>;\r\n\r\nconst RegisterPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const { isAuthorized, wasInitialAuth } = useSelector(\r\n    (state) => state.userData\r\n  );\r\n  const isRequest = useSelector((state) => state.request.isRequest);\r\n  const { show, text } = useSelector((state) => state.confirmation);\r\n\r\n  const { confirm, onConfirm, onCancel } = useConfirm();\r\n\r\n  const [inputValue, setInputValue] = useState<TInputValue<string>>({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  const [error, setError] = useState<TInputValue<boolean>>({\r\n    name: false,\r\n    email: false,\r\n    password: false,\r\n  });\r\n  const setErr = setError as ErrorSetter;\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setInputValue({ ...inputValue, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    if (hasEmptyInput(inputValue)) {\r\n      setErr((prev) => ({\r\n        ...prev,\r\n        ...setErrInEmptyInput(inputValue),\r\n      }));\r\n      return;\r\n    }\r\n    if (isRequest || hasErrorInput(error)) return;\r\n\r\n    dispatch(register(inputValue, confirm));\r\n  };\r\n\r\n  if (isAuthorized) {\r\n    return <Navigate to={location.state ? location.state?.from : \"/\"} />;\r\n  } else if (!wasInitialAuth) {\r\n    return <>{null}</>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Container>\r\n        <Form\r\n          btnName=\"Зарегистрироваться\"\r\n          title=\"Регистрация\"\r\n          onSubmit={handleSubmit}\r\n        >\r\n          <TextInput\r\n            onChange={onChange}\r\n            value={inputValue.name}\r\n            name={\"name\"}\r\n            error={error.name}\r\n            setError={setErr}\r\n          />\r\n          <EmailInput\r\n            onChange={onChange}\r\n            value={inputValue.email}\r\n            name={\"email\"}\r\n            error={error.email}\r\n            setError={setErr}\r\n          />\r\n          <PasswordInput\r\n            onChange={onChange}\r\n            value={inputValue.password}\r\n            name={\"password\"}\r\n            error={error.password}\r\n            setError={setErr}\r\n          />\r\n        </Form>\r\n        <ParagraphLink link=\"Войти\" to=\"/login\">\r\n          Уже зарегистрированы?\r\n        </ParagraphLink>\r\n      </Container>\r\n      {show && (\r\n        <Modal onClose={onCancel}>\r\n          <Confirm\r\n            text={text}\r\n            btnTrue={\"Войти\"}\r\n            btnFalse={\"Спасибо, не сейчас\"}\r\n            onConfirm={onConfirm}\r\n            onCancel={onCancel}\r\n          />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import { useState, FC } from \"react\";\r\nimport Container from \"../../components/generic/container/container\";\r\nimport Form from \"../../components/generic/form/form\";\r\nimport ParagraphLink from \"../../components/generic/paragraph-link/paragraph-link\";\r\nimport EmailInput from \"../../components/generic/email-input/email-input\";\r\nimport {\r\n  hasEmptyInput,\r\n  hasErrorInput,\r\n  setErrInEmptyInput,\r\n} from \"../../utils/utils\";\r\nimport { useNavigate, Navigate } from \"react-router\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { confirmEmail } from \"../../services/thunks/requests\";\r\nimport { ErrorSetter, IAllInputs } from \"../../types/common\";\r\n\r\ntype TInputValue<T> = Required<Pick<IAllInputs<T>, \"email\">>;\r\n\r\nconst ForgotPasswordPage: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { isAuthorized, wasInitialAuth } = useSelector(\r\n    (state) => state.userData\r\n  );\r\n  const isRequest = useSelector((state) => state.request.isRequest);\r\n\r\n  const navigate = useNavigate();\r\n  const [inputValue, setInputValue] = useState<TInputValue<string>>({\r\n    email: \"\",\r\n  });\r\n  const [error, setError] = useState<TInputValue<boolean>>({ email: false });\r\n  const setErr = setError as ErrorSetter;\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const { name, value } = e.target;\r\n    setInputValue({ ...inputValue, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent): void => {\r\n    e.preventDefault();\r\n    if (hasEmptyInput(inputValue)) {\r\n      setErr((prev) => ({\r\n        ...prev,\r\n        ...setErrInEmptyInput(inputValue),\r\n      }));\r\n      return;\r\n    }\r\n    if (isRequest || hasErrorInput(error)) return;\r\n\r\n    dispatch(confirmEmail(inputValue, navigate));\r\n  };\r\n\r\n  if (isAuthorized) {\r\n    return <Navigate to={\"/\"} />;\r\n  } else if (!wasInitialAuth) {\r\n    return <>{null}</>;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Form\r\n        btnName=\"Восстановить\"\r\n        title=\"Восстановление пароля\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <EmailInput\r\n          onChange={onChange}\r\n          value={inputValue.email}\r\n          name={\"email\"}\r\n          placeholder={\"Укажите e-mail\"}\r\n          error={error.email}\r\n          setError={setErr}\r\n        />\r\n      </Form>\r\n      <ParagraphLink link=\"Войти\" to=\"/login\">\r\n        Вспомнили пароль?\r\n      </ParagraphLink>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordPage;\r\n","import { FC, useState } from \"react\";\r\nimport Container from \"../../components/generic/container/container\";\r\nimport Form from \"../../components/generic/form/form\";\r\nimport ParagraphLink from \"../../components/generic/paragraph-link/paragraph-link\";\r\nimport PasswordInput from \"../../components/generic/password-input/password-input\";\r\nimport TextInput from \"../../components/generic/text-input/text-input\";\r\nimport {\r\n  hasEmptyInput,\r\n  hasErrorInput,\r\n  setErrInEmptyInput,\r\n} from \"../../utils/utils\";\r\nimport { Navigate, useLocation } from \"react-router\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { resetPassword } from \"../../services/thunks/requests\";\r\nimport { ErrorSetter, IAllInputs } from \"../../types/common\";\r\n\r\ntype TInputValue<T> = Required<Pick<IAllInputs<T>, \"token\" | \"password\">>;\r\n\r\nconst ResetPasswordPage: FC = () => {\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const { isAuthorized, wasInitialAuth } = useSelector(\r\n    (state) => state.userData\r\n  );\r\n  const isRequest = useSelector((state) => state.request.isRequest);\r\n\r\n  const [inputValue, setInputValue] = useState<TInputValue<string>>({\r\n    token: \"\",\r\n    password: \"\",\r\n  });\r\n  const [error, setError] = useState<TInputValue<boolean>>({\r\n    password: false,\r\n    token: false,\r\n  });\r\n  const setErr = setError as ErrorSetter;\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setInputValue({ ...inputValue, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    if (hasEmptyInput(inputValue)) {\r\n      setErr((prev) => ({\r\n        ...prev,\r\n        ...setErrInEmptyInput(inputValue),\r\n      }));\r\n      return;\r\n    }\r\n    if (isRequest || hasErrorInput(error)) return;\r\n\r\n    dispatch(resetPassword(inputValue));\r\n\r\n    setInputValue({\r\n      token: \"\",\r\n      password: \"\",\r\n    });\r\n  };\r\n\r\n  if (isAuthorized) {\r\n    return <Navigate to={\"/\"} />;\r\n  } else if (location.state?.from !== \"/reset-password\") {\r\n    return <Navigate to={\"/forgot-password\"} />;\r\n  } else if (!wasInitialAuth) {\r\n    return <>{null}</>;\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <Form\r\n        btnName=\"Сохранить\"\r\n        title=\"Восстановление пароля\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <PasswordInput\r\n          onChange={onChange}\r\n          value={inputValue.password}\r\n          name={\"password\"}\r\n          placeholder={\"Введите новый пароль\"}\r\n          error={error.password}\r\n          setError={setErr}\r\n        />\r\n        <TextInput\r\n          placeholder={\"Введите код из письма\"}\r\n          onChange={onChange}\r\n          value={inputValue.token}\r\n          name={\"token\"}\r\n          error={error.token}\r\n          setError={setErr}\r\n        />\r\n      </Form>\r\n      <ParagraphLink link=\"Войти\" to=\"/login\">\r\n        Вспомнили пароль?\r\n      </ParagraphLink>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordPage;\r\n","import styles from \"./profile-nav.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { useDispatch } from \"../../../hooks/reduxHooks\";\r\nimport { logout } from \"../../../services/thunks/user\";\r\nimport { FC, SyntheticEvent } from \"react\";\r\n\r\ninterface IProfileNav {\r\n  mix?: string;\r\n}\r\n\r\nconst setClassName = ({ isActive }: { isActive: boolean }): string =>\r\n  `${styles.nav__link} ${\r\n    isActive ? styles.nav__link_active : \"text_color_inactive\"\r\n  } text text_type_main-medium`;\r\n\r\nconst ProfileNav: FC<IProfileNav> = ({mix}) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleLogout = (e: SyntheticEvent): void => {\r\n    e.preventDefault();\r\n    dispatch(logout());\r\n  };\r\n\r\n  return (\r\n    <nav className={`${styles[`profile-nav`]} ${mix}`}>\r\n      <ul className={styles.nav__list}>\r\n        <li className={styles.nav__item}>\r\n          <NavLink to={\"/profile\"} className={setClassName} end>\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li className={styles.nav__item}>\r\n          <NavLink to={\"/profile/orders\"} className={setClassName} end>\r\n            История заказов\r\n          </NavLink>\r\n        </li>\r\n        <li className={styles.nav__item}>\r\n          <NavLink\r\n            to={\"/login\"}\r\n            onClick={handleLogout}\r\n            className={setClassName}\r\n            end\r\n          >\r\n            Выход\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n      <p\r\n        className={`${styles.description} text_color_inactive text text_type_main-default mt-20`}\r\n      >\r\n        В этом разделе вы можете изменить свои персональные данные\r\n      </p>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default ProfileNav;\r\n","import styles from \"./profile-page.module.css\";\r\nimport { useState, useEffect, useRef, FC } from \"react\";\r\nimport ProfileNav from \"../../components/generic/profile-nav/profile-nav\";\r\nimport TextInput from \"../../components/generic/text-input/text-input\";\r\nimport EmailInput from \"../../components/generic/email-input/email-input\";\r\nimport PasswordInput from \"../../components/generic/password-input/password-input\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport {\r\n  hasEmptyInput,\r\n  hasErrorInput,\r\n  setErrInEmptyInput,\r\n} from \"../../utils/utils\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { patchUser } from \"../../services/thunks/user\";\r\nimport isEqual from \"lodash/isEqual\";\r\nimport { ErrorSetter, IAllInputs } from \"../../types/common\";\r\n\r\ntype TInputValue<T> = Required<\r\n  Pick<IAllInputs<T>, \"name\" | \"email\" | \"password\">\r\n>;\r\n\r\nconst ProfilePage: FC = () => {\r\n  const refState = useRef<TInputValue<string> | null>(null);\r\n  const dispatch = useDispatch();\r\n  const { name, email } = useSelector((state) =>\r\n    state.userData.user ? state.userData.user : { name: \"\", email: \"\" }\r\n  );\r\n  const userRequest = useSelector((state) => state.userData.userRequest);\r\n\r\n  const [inputValue, setInputValue] = useState<TInputValue<string>>({\r\n    name,\r\n    email,\r\n    password: \"123456\",\r\n  });\r\n  const [error, setError] = useState<TInputValue<boolean>>({\r\n    name: false,\r\n    email: false,\r\n    password: false,\r\n  });\r\n  const setErr = setError as ErrorSetter;\r\n  const [wasEdition, setWasEdition] = useState<boolean>(false);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => setInputValue({ ...inputValue, name, email }), [name, email]);\r\n\r\n  useEffect(() => {\r\n    let ref = refState.current;\r\n    if (ref === null || name !== ref.name || email !== ref.email) {\r\n      refState.current = inputValue;\r\n    }\r\n    setWasEdition(!isEqual(refState.current, inputValue));\r\n  }, [inputValue, name, email]);\r\n\r\n  const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setInputValue({ ...inputValue, [name]: value });\r\n  };\r\n\r\n  const cancelInput = (e: React.SyntheticEvent) => {\r\n    if (refState.current === null) return;\r\n    e.preventDefault();\r\n    setInputValue(refState.current);\r\n    setErr({\r\n      name: false,\r\n      email: false,\r\n      password: false,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n    if (userRequest || hasErrorInput(error)) return;\r\n    if (hasEmptyInput(inputValue)) {\r\n      setError((prev) => ({\r\n        ...prev,\r\n        ...setErrInEmptyInput(inputValue),\r\n      }));\r\n      return;\r\n    }\r\n    dispatch(patchUser(inputValue));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <ProfileNav />\r\n      <form className={styles.form} onSubmit={handleSubmit}>\r\n        <ul className={`${styles.form__list}`}>\r\n          <li className={`${styles.form__input} mb-6`}>\r\n            <TextInput\r\n              onChange={onChange}\r\n              value={inputValue.name}\r\n              name={\"name\"}\r\n              icon={\"EditIcon\"}\r\n              disabled={true}\r\n              error={error.name}\r\n              setError={setErr}\r\n            />\r\n          </li>\r\n          <li className={`${styles.form__input} mb-6`}>\r\n            <EmailInput\r\n              onChange={onChange}\r\n              value={inputValue.email}\r\n              name={\"email\"}\r\n              placeholder={\"Логин\"}\r\n              icon={\"EditIcon\"}\r\n              disabled={true}\r\n              error={error.email}\r\n              setError={setErr}\r\n            />\r\n          </li>\r\n          <li className={`${styles.form__input} mb-6`}>\r\n            <PasswordInput\r\n              onChange={onChange}\r\n              value={inputValue.password}\r\n              name={\"password\"}\r\n              icon={\"EditIcon\"}\r\n              disabled={true}\r\n              error={error.password}\r\n              setError={setErr}\r\n            />\r\n          </li>\r\n        </ul>\r\n        {wasEdition && (\r\n          <div className={styles.form__buttons}>\r\n            <Button type=\"secondary\" size=\"medium\" onClick={cancelInput}>\r\n              \"Отмена\"\r\n            </Button>\r\n            <Button type=\"primary\" size=\"medium\">\r\n              \"Сохранить\"\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfilePage;\r\n","import styles from \"./page-404.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FC } from \"react\";\r\n\r\nconst Page404: FC = () => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1\r\n        className={`${styles.title} text text_type_main-large text_color_inactive`}\r\n      >\r\n        Страница не найдена\r\n      </h1>\r\n      <p className={`${styles.text} text text_type_digits-large`}>404</p>\r\n      <Link to=\"/\" className={`${styles.link} text text_type_main-default`}>\r\n        На главную &#10132;\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page404;\r\n","import { TActionTemplate, TWsOrdersSuccessPayload } from \"../../types/services\";\n\nexport const WS_CONNECTION_START = \"WS_CONNECTION_START\";\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\";\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\";\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\";\nexport const WS_GET_MESSAGE = \"WS_GET_MESSAGE\";\n\nexport interface IWsActionTypes {\n  wsInit: \"WS_CONNECTION_START\";\n  onOpen: \"WS_CONNECTION_SUCCESS\";\n  onClose: \"WS_CONNECTION_CLOSED\";\n  onError: \"WS_CONNECTION_ERROR\";\n  onMessage: \"WS_GET_MESSAGE\";\n}\n\nexport const wsActionTypes: IWsActionTypes = {\n  wsInit: WS_CONNECTION_START,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_MESSAGE,\n};\n\n// типы экшенов:\n\ntype TWsConnectionStartAction = TActionTemplate<typeof WS_CONNECTION_START, string>;\n\ntype TWsConnectionSuccessAction = TActionTemplate<typeof WS_CONNECTION_SUCCESS>;\n\ntype TWsConnectionErrorAction = Required<TActionTemplate<\n  typeof WS_CONNECTION_ERROR,\n  Event\n>>;\n\ntype TWsConnectionClosedAction = TActionTemplate<typeof WS_CONNECTION_CLOSED>;\n\ntype TWsGetMessageAction = Required<\n  TActionTemplate<typeof WS_GET_MESSAGE, TWsOrdersSuccessPayload>\n>;\n\nexport type TWsActions =\n  | TWsConnectionStartAction\n  | TWsConnectionSuccessAction\n  | TWsConnectionErrorAction\n  | TWsConnectionClosedAction\n  | TWsGetMessageAction;\n","import { useLocation, Navigate, RouteProps } from \"react-router\";\r\nimport { useSelector, useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_CLOSED,\r\n} from \"../../services/actions\";\r\nimport { getCookie } from \"../../utils/utils\";\r\n\r\ninterface IProtectedRoute extends RouteProps {\r\n  to: string;\r\n}\r\n\r\nconst ProtectedRoute = ({ children, to }: IProtectedRoute) => {\r\n  let location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const isAuthorized = useSelector((state) => state.userData.isAuthorized);\r\n\r\n  const isTrueWsPath = useMemo(\r\n    () => location.pathname.includes(\"/orders\"),\r\n    [location]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!isAuthorized || !isTrueWsPath) return;\r\n    dispatch({\r\n      type: WS_CONNECTION_START,\r\n      payload: `/orders?token=${getCookie(\"accessToken\")}`,\r\n    });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [isAuthorized, isTrueWsPath, dispatch]);\r\n\r\n  if (!isAuthorized) {\r\n    return <Navigate to={to} state={{ from: location.pathname }} />;\r\n  }\r\n\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import styles from \"./ingredient-details.module.css\";\r\nimport { modalCardTemplate } from \"../../../utils/data\";\r\nimport { useSelector } from \"../../../hooks/reduxHooks\";\r\nimport { useMemo, FC } from \"react\";\r\nimport { IMenuItem } from \"../../../types/common\";\r\n\r\ninterface IIngredientDetails {\r\n  id: string;\r\n}\r\n\r\nconst IngredientDetails: FC<IIngredientDetails> = ({ id }) => {\r\n  const menu: IMenuItem[] = useSelector((store) => store.menu.menu);\r\n  const ingredient = useMemo(\r\n    () => menu.find((ingr) => ingr._id === id),\r\n    [menu, id]\r\n  ) as IMenuItem;\r\n\r\n  if (menu.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.details}>\r\n      <img\r\n        src={ingredient.image_large}\r\n        alt={ingredient.name}\r\n        className={styles.details__img}\r\n      />\r\n      <p\r\n        className={`${styles.details__name} mt-4 mb-8 text text_type_main-medium`}\r\n      >\r\n        {ingredient.name}\r\n      </p>\r\n      <ul className={styles.details__list}>\r\n        {modalCardTemplate.map((i) => (\r\n          <li\r\n            className={`${styles.details__item} mr-5 text text_type_main-default text_color_inactive`}\r\n            key={i.id}\r\n          >\r\n            {i.sign}\r\n            <br />\r\n            <span\r\n              className={`mt-2 text text_type_digits-default text_color_inactive`}\r\n            >\r\n              {ingredient[i.key as keyof IMenuItem]}\r\n            </span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import styles from \"./ingr-detail-page.module.css\";\r\nimport IngredientDetails from \"../../components/modal/ingredient-details/ingredient-details\";\r\nimport { useParams } from \"react-router\";\r\nimport { FC } from \"react\";\r\n\r\nconst IngrDetailPage: FC = () => {\r\n  const param = useParams();\r\n  return (\r\n    <div className={styles.container}>\r\n      <h1 className={`${styles.title} text text_type_main-large`}>\r\n        Детали ингредиента\r\n      </h1>\r\n      <IngredientDetails id={param.id as string} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngrDetailPage;\r\n","import IngredientDetails from \"../../components/modal/ingredient-details/ingredient-details\";\r\nimport Modal from \"../../components/modal/modal\";\r\nimport { useParams, useNavigate } from \"react-router\";\r\nimport { FC } from \"react\";\r\n\r\nconst ModalIngrDetailPage: FC = () => {\r\n  const param = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const closeModal = () => {\r\n    navigate(\"/\", { replace: true });\r\n  };\r\n  return (\r\n    <Modal title=\"Детали ингредиента\" onClose={closeModal}>\r\n      <IngredientDetails id={param.id as string} />\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalIngrDetailPage;\r\n","import styles from \"./order-info.module.css\";\r\nimport { FC, useState } from \"react\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { IHandeledOrder } from \"../../../types/common\";\r\n\r\ninterface IOrderInfo {\r\n  order: IHandeledOrder;\r\n}\r\n\r\nconst OrderInfo: FC<IOrderInfo> = ({ order }) => {\r\n  const [isImgLoaded, setIsImgLoaded] = useState(false);\r\n\r\n  return (\r\n    <div className={`${styles.order} pt-10`}>\r\n      <p className={`text text_type_main-medium mb-3`}>{order.name}</p>\r\n      <p\r\n        className={`${\r\n          order.status === \"Выполнен\" && styles.order__status_color_greentext\r\n        } text_type_main-default mb-15`}\r\n      >\r\n        {order.status}\r\n      </p>\r\n      <p className={`text text_type_main-medium mb-6`}>Состав:</p>\r\n      <ul className={`${styles.order__list}`}>\r\n        {order.ingrForRender.map((i, ind) => (\r\n          <li className={`${styles.order__item} mb-4`} key={ind}>\r\n            <img\r\n              src={i.image_mobile}\r\n              alt={i.name}\r\n              hidden={!isImgLoaded}\r\n              onLoad={() => (isImgLoaded ? void 0 : setIsImgLoaded(true))}\r\n              className={`${styles.order__img} mr-4`}\r\n            />\r\n            <p\r\n              className={`${\r\n                styles[`order__item-name`]\r\n              } text text_type_main-default`}\r\n            >\r\n              {i.name}\r\n            </p>\r\n            <div className={styles.order__price}>\r\n              <span\r\n                className={`${\r\n                  styles[`order__item-value`]\r\n                } mr-2 ml-4 text text_type_digits-default`}\r\n              >\r\n                {`${i.count} x ${i.price}`}\r\n              </span>\r\n              <CurrencyIcon type=\"primary\" />\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div className={`${styles.order__price} mt-10`}>\r\n        <p className={`text text_type_main-default text_color_inactive `}>\r\n          {order.time}\r\n        </p>\r\n        <span\r\n          className={`${styles.order__value} mr-2 text text_type_digits-default`}\r\n        >\r\n          {order.totalPrice}\r\n        </span>\r\n        <CurrencyIcon type=\"primary\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderInfo;\r\n","import OrderInfo from \"../../components/modal/order-info/order-info\";\r\nimport Modal from \"../../components/modal/modal\";\r\nimport { useNavigate, useLocation } from \"react-router\";\r\nimport { FC } from \"react\";\r\nimport { IHandeledOrder } from \"../../types/common\";\r\n\r\nconst ModalOrderInfoPage: FC = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const order: IHandeledOrder = location.state?.order;\r\n\r\n  const closeModal = () => {\r\n    navigate(location.state?.background, { replace: true });\r\n  };\r\n  return (\r\n    <Modal\r\n      title={`#${order.number}`}\r\n      modTitle={\"text_type_digits-default\"}\r\n      onClose={closeModal}\r\n    >\r\n      <OrderInfo order={order} />\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalOrderInfoPage;\r\n","import { Outlet } from \"react-router\";\r\nimport { memo, FC, useEffect } from \"react\";\r\nimport { useDispatch } from \"../../hooks/reduxHooks\";\r\nimport {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_CLOSED,\r\n} from \"../../services/actions\";\r\n\r\nconst LayoutFeed: FC = memo(() => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: WS_CONNECTION_START,\r\n      payload: `/orders/all`,\r\n    });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <Outlet />\r\n    </>\r\n  );\r\n});\r\n\r\nexport default LayoutFeed;\r\n","import styles from \"./feed-item.module.css\";\nimport { FC, useState, memo } from \"react\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { useSelector } from \"../../hooks/reduxHooks\";\nimport { useNavigate } from \"react-router\";\nimport { IOrder, IMenuItem } from \"../../types/common\";\nimport { handleOrder } from \"../../utils/utils\";\n\ninterface IFeedItem {\n  mod?: string;\n  orderData: IOrder;\n}\n\nconst FeedItem: FC<IFeedItem> = memo(({ mod, orderData }) => {\n  const menu = useSelector((state) => state.menu.menu);\n  const order = handleOrder(orderData, menu);\n  const navigate = useNavigate();\n  const [isImgLoaded, setIsImgLoaded] = useState(false);\n\n  const lengthIngr = mod === \"profile\" ? 12 : 7;\n\n  const ingredientsArr = order.ingrForRender as IMenuItem[];\n  const ingredientsForRender =\n    ingredientsArr.length > lengthIngr\n      ? ingredientsArr.slice(0, lengthIngr)\n      : ingredientsArr;\n\n  const pathTo =\n    mod === \"profile\"\n      ? `/profile/orders/${order.number}`\n      : `/feed/${order.number}`;\n\n  const backgroundPath = mod === \"profile\" ? `/profile/orders` : \"/feed\";\n\n  const handleClick = (): void => {\n    navigate(pathTo, {\n      state: {\n        background: {\n          pathname: backgroundPath,\n        },\n        key: order.number,\n        order: order,\n      },\n    });\n  };\n\n  return (\n    <li className={styles.item} onClick={handleClick}>\n      <div className={`${styles[`item__data-container`]} mb-6`}>\n        <span\n          className={`${styles.item__number} text text_type_digits-default`}\n        >\n          {`#${order.number}`}\n        </span>\n        <span\n          className={`${styles.item__data} text text_type_main-default text_color_inactive`}\n        >\n          {order.time}\n        </span>\n      </div>\n      <p className={`${styles.item__name} text text_type_main-medium`}>\n        {orderData.name}\n      </p>\n      {mod === \"profile\" && (\n        <p\n          className={`${styles.item__name} text text_type_main-default mt-2 ${\n            order.status === \"Выполнен\" && styles.item__name_color_green\n          }`}\n        >\n          {order.status}\n        </p>\n      )}\n      <div className={`${styles.item__result} mt-6`}>\n        <ul className={styles.item__ingredients}>\n          {ingredientsForRender.map((i, ind) => (\n            <li\n              className={styles.item__ingredient}\n              key={ind}\n              style={{\n                transform: `translate(${-15 * ind}px, ${0}px)`,\n                zIndex: lengthIngr - ind,\n              }}\n            >\n              <img\n                src={i.image_mobile}\n                alt={i.name}\n                hidden={!isImgLoaded}\n                onLoad={() => (isImgLoaded ? void 0 : setIsImgLoaded(true))}\n                className={styles.item__img}\n              />\n              {(i.count as number) > 1 && (\n                <span\n                  className={`${styles.item__count} text text_type_main-default`}\n                >\n                  {`+${i.count}`}\n                </span>\n              )}\n            </li>\n          ))}\n          {ingredientsArr.length > lengthIngr && (\n            <span\n              className={styles.item__ellipsis}\n              style={{ transform: `translate(${-15 * lengthIngr}px, ${0}px)` }}\n            >\n              ...\n            </span>\n          )}\n        </ul>\n        <div className={styles.item__price}>\n          <span\n            className={`${styles.item__value} ml-6 mr-2 text text_type_digits-default`}\n          >\n            {order.totalPrice}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </li>\n  );\n});\n\nexport default FeedItem;\n","import styles from \"./feed.module.css\";\nimport FeedItem from \"../feed-item/feed-item\";\nimport { FC } from \"react\";\nimport { useSelector } from \"../../hooks/reduxHooks\";\n\ninterface IFeed {\n  mod?: string;\n}\n\nconst Feed: FC<IFeed> = ({ mod }) => {\n  const allOrders = useSelector((state) => state.orders.resAll?.orders);\n  const ownerOrders = useSelector((state) =>\n    state.orders.resOwner?.orders.reverse()\n  );\n\n  const feedArr = mod === \"profile\" ? ownerOrders : allOrders;\n\n  return (\n    <ul className={`${styles.feed} ${styles[`feed_type_${mod}`]}`}>\n      {feedArr?.map((i) => (\n        <FeedItem mod={mod} orderData={i} key={i._id} />\n      ))}\n    </ul>\n  );\n};\n\nexport default Feed;\n","import styles from \"./stats.module.css\";\nimport { FC, useCallback } from \"react\";\nimport { useSelector } from \"../../hooks/reduxHooks\";\n\ntype TOrderNumbers = {\n  done: number[];\n  pending: number[];\n};\n\nconst Stats: FC = () => {\n  const ordersAll = useSelector((state) => state.orders.resAll);\n  const ordersNumbers: TOrderNumbers | undefined = ordersAll?.orders.reduce(\n    (prev: TOrderNumbers, i) => {\n      i.status === \"done\"\n        ? prev.done.push(i.number)\n        : prev.pending.push(i.number);\n      return prev;\n    },\n    { done: [], pending: [] }\n  );\n\n  const doneForRenfer = ordersNumbers?.done.slice(0, 20);\n  const pendingForRenfer = ordersNumbers?.pending.slice(0, 20);\n\n  const insertStateHtml = useCallback(\n    (numbers: number[] | undefined, state: string, mod?: string) => (\n      <div className={styles.state}>\n        <p className={`text text_type_main-medium mb-6`}>{state}</p>\n        <ul className={styles.state__numbers}>\n          {numbers?.map((i: number, index: number) => (\n            <li\n              className={`${styles.state__number} ${\n                styles[`state__number_color_${mod}`]\n              } text text_type_digits-default`}\n              key={index}\n            >\n              {i}\n            </li>\n          ))}\n        </ul>\n      </div>\n    ),\n    []\n  );\n\n  const insertStatsHtml = useCallback(\n    (value: number, text: string) => (\n      <>\n        <p className={`text text_type_main-medium mt-15`}>{text}</p>\n        <span className={`${styles.stats} text text_type_digits-large`}>\n          {value}\n        </span>\n      </>\n    ),\n    []\n  );\n\n  return (\n    <>\n      {ordersAll && (\n        <div className={`${styles.container} ml-15`}>\n          <div className={styles[`state-container`]}>\n            {insertStateHtml(doneForRenfer, \"Готовы:\", \"green\")}\n            {insertStateHtml(pendingForRenfer, \"В работе:\")}\n          </div>\n          {insertStatsHtml(ordersAll.total, \"Выполнено за все время:\")}\n          {insertStatsHtml(ordersAll.totalToday, \"Выполнено за сегодня:\")}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Stats;\n","import styles from \"./feed-page.module.css\";\nimport Feed from \"../../components/feed/feed\";\nimport Stats from \"../../components/stats/stats\";\nimport { FC, memo } from \"react\";\n\nconst FeedPage: FC = memo(() => {\n  return (\n    <section className={styles.section}>\n      <h1\n        className={`${styles.title} mt-10 mb-5 ml-5 mr-5 text text_type_main-large`}\n      >\n        Лента заказов\n      </h1>\n      <div className={styles.container}>\n        <Feed />\n        <Stats />\n      </div>\n    </section>\n  );\n});\n\nexport default FeedPage;\n","import styles from \"./profile-orders-page.module.css\";\nimport Feed from \"../../components/feed/feed\";\nimport ProfileNav from \"../../components/generic/profile-nav/profile-nav\";\nimport { FC } from \"react\";\n\nconst ProfileOrdersPage: FC = () => {\n  return (\n    <div className={styles.container}>\n      <ProfileNav mix={\"mr-15 mt-20\"} />\n      <Feed mod={\"profile\"} />\n    </div>\n  );\n};\n\nexport default ProfileOrdersPage;\n","import styles from \"./order-info-page.module.css\";\nimport { FC, useMemo } from \"react\";\nimport { useLocation, useParams, Navigate } from \"react-router-dom\";\nimport OrderInfo from \"../../components/modal/order-info/order-info\";\nimport { useSelector } from \"../../hooks/reduxHooks\";\nimport { handleOrder } from \"../../utils/utils\";\nimport { IHandeledOrder } from \"../../types/common\";\n\nconst OrderInfoPage: FC = () => {\n  const location = useLocation();\n  const param = useParams();\n  const ordersAll = useSelector((state) => state.orders.resAll);\n  const ordersOwner = useSelector((state) => state.orders.resOwner);\n  const menu = useSelector((state) => state.menu.menu);\n  const isProfilePage = location.pathname.includes(\"profile\");\n\n  const order = useMemo(() => {\n    const orders = isProfilePage ? ordersOwner?.orders : ordersAll?.orders;\n    return orders?.find((i) => i.number === Number(param?.id));\n  }, [param, ordersAll, ordersOwner, isProfilePage]);\n\n  let handledOrder: IHandeledOrder | undefined = undefined;\n\n  if (order && menu) {\n    handledOrder = handleOrder(order, menu);\n  }\n\n  if (isProfilePage && ordersOwner && !order) {\n    return <Navigate to=\"*\" />;\n  }\n  if (!isProfilePage && ordersAll && !order) {\n    return <Navigate to=\"*\" />;\n  }\n\n  return (\n    <>\n      {handledOrder && (\n        <section className={styles.section}>\n          <h1 className={`${styles.title} text text_type_digits-default`}>\n            {`#${handledOrder.number}`}\n          </h1>\n          <OrderInfo order={handledOrder} />\n        </section>\n      )}\n    </>\n  );\n};\n\nexport default OrderInfoPage;\n","import { useEffect, FC } from \"react\";\r\nimport LayoutWithHeader from \"../layout-with-header/layout-with-header\";\r\nimport MainPage from \"../../pages/main-page/main-page\";\r\nimport LoginPage from \"../../pages/login-page/login-page\";\r\nimport RegisterPage from \"../../pages/register-page/register-page\";\r\nimport ForgotPasswordPage from \"../../pages/forgot-password-page/forgot-password-page\";\r\nimport ResetPasswordPage from \"../../pages/reset-password-page/reset-password-page\";\r\nimport ProfilePage from \"../../pages/profile-page/profile-page\";\r\nimport Page404 from \"../../pages/page-404/page-404\";\r\nimport ProtectedRoute from \"../protected-route/protected-route\";\r\nimport IngrDetailPage from \"../../pages/ingr-detail-page/ingr-detail-page\";\r\nimport ModalIngrDetailPage from \"../../pages/modal-ingr-detail-page/modal-ingr-detail-page\";\r\nimport ModalOrderInfoPage from \"../../pages/modal-order-info-page/modal-order-info-page\";\r\nimport LayoutFeed from \"../layout-feed/layout-feed\";\r\nimport FeedPage from \"../../pages/feed-page/feed-page\";\r\nimport ProfileOrdersPage from \"../../pages/profile-orders-page/profile-orders-page\";\r\nimport OrderInfoPage from \"../../pages/order-info-page/order-info-page\";\r\nimport { useDispatch } from \"../../hooks/reduxHooks\";\r\nimport { getMenu } from \"../../services/thunks/main\";\r\nimport { getUser } from \"../../services/thunks/user\";\r\nimport {\r\n  Routes,\r\n  Route,\r\n  useLocation,\r\n  Outlet,\r\n  useNavigationType,\r\n} from \"react-router-dom\";\r\n\r\nconst App: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const navigationType = useNavigationType();\r\n  const background = location.state?.background;\r\n  const condition =\r\n    (Boolean(background) && location.pathname.startsWith(\"/ingredients\")) ||\r\n    (Boolean(background) &&\r\n      !location.pathname.startsWith(\"/ingredients\") &&\r\n      navigationType !== \"POP\");\r\n\r\n  useEffect(() => {\r\n    dispatch(getUser());\r\n    dispatch(getMenu());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <>\r\n      <Routes location={condition ? background : location}>\r\n        <Route path=\"/\" element={<LayoutWithHeader />}>\r\n          <Route index element={<MainPage />} />\r\n          <Route path=\"login\" element={<LoginPage />} />\r\n          <Route path=\"register\" element={<RegisterPage />} />\r\n          <Route path=\"forgot-password\" element={<ForgotPasswordPage />} />\r\n          <Route path=\"reset-password\" element={<ResetPasswordPage />} />\r\n          <Route path=\"ingredients/:id\" element={<IngrDetailPage />} />\r\n          <Route path=\"feed\" element={<LayoutFeed />}>\r\n            <Route index element={<FeedPage />} />\r\n            <Route path=\":id\" element={<OrderInfoPage />} />\r\n          </Route>\r\n          <Route\r\n            path=\"profile\"\r\n            element={\r\n              <ProtectedRoute to=\"/login\">\r\n                <Outlet />\r\n              </ProtectedRoute>\r\n            }\r\n          >\r\n            <Route index element={<ProfilePage />} />\r\n            <Route path=\"orders\" element={<ProfileOrdersPage />} />\r\n            <Route path=\"orders/:id\" element={<OrderInfoPage />} />\r\n          </Route>\r\n        </Route>\r\n        <Route path=\"*\" element={<Page404 />} />\r\n      </Routes>\r\n\r\n      <Routes location={condition ? location : \"/\"}>\r\n        <Route path=\"ingredients/:id\" element={<ModalIngrDetailPage />} />\r\n        <Route path=\"profile/orders/:id\" element={<ModalOrderInfoPage />} />\r\n        <Route path=\"feed/:id\" element={<ModalOrderInfoPage />} />\r\n        <Route path=\"*\" element={null} />\r\n      </Routes>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {\r\n  MENU_REQUEST,\r\n  MENU_SUCCESS,\r\n  MENU_ERROR,\r\n  ADD_BUN,\r\n  REMOVE_BUN,\r\n  ADD_INGREDIENT,\r\n  REMOVE_INGREDIENT,\r\n  MOVE_INGREDIENT,\r\n  CLEAR_CONSTRUCTOR,\r\n  ORDER_REQUEST,\r\n  ORDER_SUCCESS,\r\n  ORDER_ERROR,\r\n  CLOSE_ORDER_DETAILS,\r\n  TMenuActions,\r\n  TBurgConstructorActions,\r\n  TOrderDetailsActions,\r\n} from \"../actions\";\r\nimport { IMenuItem } from \"../../types/common\";\r\nimport { TOrderSuccessPayload } from \"../../types/services\";\r\n\r\ninterface IMenu {\r\n  menu: IMenuItem[];\r\n  menuRequest: boolean;\r\n  menuFailed: boolean;\r\n}\r\n\r\ninterface IConstructor {\r\n  ingredients: IMenuItem[];\r\n  bun: IMenuItem | null;\r\n  empty: boolean;\r\n  ingrCounter: { [key: string]: number | undefined };\r\n}\r\n\r\ninterface IOrderDetails {\r\n  isModalOpen: boolean;\r\n  orderList: IMenuItem[];\r\n  orderRes: TOrderSuccessPayload | undefined;\r\n  orderRequest: boolean;\r\n  orderFailed: boolean;\r\n  canSubmit: boolean;\r\n}\r\n\r\nconst initialMenu: IMenu = {\r\n  menu: [],\r\n  menuRequest: false,\r\n  menuFailed: false,\r\n};\r\n\r\nconst initialConstructor: IConstructor = {\r\n  ingredients: [],\r\n  bun: null,\r\n  empty: true,\r\n  ingrCounter: {},\r\n};\r\n\r\nconst initialOrderDetails: IOrderDetails = {\r\n  isModalOpen: false,\r\n  orderList: [],\r\n  orderRes: undefined,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n  canSubmit: true,\r\n};\r\n\r\nexport const menuReducer = (\r\n  state = initialMenu,\r\n  action: TMenuActions\r\n): IMenu => {\r\n  switch (action.type) {\r\n    case MENU_REQUEST:\r\n      return {\r\n        ...state,\r\n        menuRequest: true,\r\n        menuFailed: false,\r\n      };\r\n    case MENU_SUCCESS:\r\n      return {\r\n        ...state,\r\n        menuRequest: false,\r\n        menu: action.payload,\r\n      };\r\n    case MENU_ERROR:\r\n      return {\r\n        ...initialMenu,\r\n        menuFailed: true,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const burgConstructorReducer = (\r\n  state = initialConstructor,\r\n  action: TBurgConstructorActions\r\n): IConstructor => {\r\n  switch (action.type) {\r\n    case ADD_BUN:\r\n      return {\r\n        ...state,\r\n        bun: action.payload,\r\n        empty: false,\r\n      };\r\n    case REMOVE_BUN:\r\n      return {\r\n        ...state,\r\n        bun: null,\r\n        empty: state.ingredients.length === 0,\r\n      };\r\n    case ADD_INGREDIENT: {\r\n      const ingrCounterKey = action.payload._id;\r\n      const ingrCounterValue = state.ingrCounter[ingrCounterKey];\r\n      return {\r\n        ...state,\r\n        ingredients: [...state.ingredients, action.payload],\r\n        empty: false,\r\n        ingrCounter: {\r\n          ...state.ingrCounter,\r\n          [ingrCounterKey]: ingrCounterValue ? ingrCounterValue + 1 : 1,\r\n        },\r\n      };\r\n    }\r\n    case REMOVE_INGREDIENT: {\r\n      const newList = [...state.ingredients];\r\n      const removedIngr = newList.splice(action.payload, 1);\r\n      const ingrCounterKey = removedIngr[0]._id;\r\n      const ingrCounterValue = state.ingrCounter[ingrCounterKey];\r\n      return {\r\n        ...state,\r\n        ingredients: [...newList],\r\n        empty: newList.length === 0 && !state.bun,\r\n        ingrCounter: {\r\n          ...state.ingrCounter,\r\n          [ingrCounterKey]:\r\n            ingrCounterValue as number > 1 && ingrCounterValue !== undefined\r\n              ? ingrCounterValue - 1\r\n              : undefined,\r\n        },\r\n      };\r\n    }\r\n    case MOVE_INGREDIENT:\r\n      return {\r\n        ...state,\r\n        ingredients: action.payload,\r\n      };\r\n    case CLEAR_CONSTRUCTOR:\r\n      return initialConstructor;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const orderDetailsReducer = (\r\n  state = initialOrderDetails,\r\n  action: TOrderDetailsActions\r\n): IOrderDetails => {\r\n  switch (action.type) {\r\n    case ORDER_REQUEST:\r\n      return {\r\n        ...initialOrderDetails,\r\n        orderList: action.payload,\r\n        orderRequest: true,\r\n        orderFailed: false,\r\n        canSubmit: false,\r\n      };\r\n    case ORDER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isModalOpen: true,\r\n        orderRequest: false,\r\n        orderRes: action.payload,\r\n        canSubmit: true,\r\n      };\r\n    case ORDER_ERROR:\r\n      return {\r\n        ...initialOrderDetails,\r\n        orderFailed: true,\r\n      };\r\n    case CLOSE_ORDER_DETAILS:\r\n      return {\r\n        ...state,\r\n        isModalOpen: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  USER_REQUEST,\r\n  USER_SUCCESS,\r\n  USER_ERROR,\r\n  UPDATE_USER_REQUEST,\r\n  UPDATE_USER_SUCCESS,\r\n  UPDATE_USER_ERROR,\r\n  LOGOUT_REQUEST,\r\n  LOGOUT,\r\n  TUserDataActions,\r\n} from \"../actions\";\r\nimport { TUserSuccessPayload } from \"../../types/services\";\r\n\r\ninterface IUser {\r\n  user: TUserSuccessPayload | undefined;\r\n  isAuthorized: boolean;\r\n  userRequest: boolean;\r\n  userFailed: boolean;\r\n  wasInitialAuth: boolean;\r\n}\r\n\r\nconst initialUser: IUser = {\r\n  user: { name: \"\", email: \"\" },\r\n  isAuthorized: false,\r\n  userRequest: false,\r\n  userFailed: false,\r\n  wasInitialAuth: false,\r\n};\r\n\r\nexport const userDataReducer = (\r\n  state = initialUser,\r\n  action: TUserDataActions\r\n): IUser => {\r\n  switch (action.type) {\r\n    case USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n        userFailed: false,\r\n      };\r\n    case USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isAuthorized: true,\r\n        userRequest: false,\r\n        user: action.payload,\r\n        wasInitialAuth: true,\r\n      };\r\n    case USER_ERROR:\r\n      return {\r\n        ...initialUser,\r\n        isAuthorized: false,\r\n        userFailed: true,\r\n        wasInitialAuth: true,\r\n      };\r\n    case UPDATE_USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n        userFailed: false,\r\n      };\r\n    case UPDATE_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        user: { ...state.user, ...action.payload },\r\n      };\r\n    case UPDATE_USER_ERROR:\r\n      return {\r\n        ...state,\r\n        userFailed: true,\r\n      };\r\n    case LOGOUT_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n        userFailed: false,\r\n      };\r\n    case LOGOUT:\r\n      return {\r\n        ...initialUser,\r\n        wasInitialAuth: true,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  START_REQUEST,\r\n  END_REQUEST,\r\n  TRequestActions,\r\n} from \"../actions\";\r\n\r\ninterface IState {\r\n  isRequest: boolean;\r\n}\r\n\r\nconst initialState: IState = {\r\n  isRequest: false,\r\n};\r\n\r\nexport const requestReducer = (\r\n  state = initialState,\r\n  action: TRequestActions\r\n): IState => {\r\n  switch (action.type) {\r\n    case START_REQUEST:\r\n      return {\r\n        isRequest: true,\r\n      };\r\n    case END_REQUEST:\r\n      return {\r\n        isRequest: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  ALERT_ERROR,\r\n  CLEAR_ERROR,\r\n  SHOW_CONFIRM,\r\n  HIDE_CONFIRM,\r\n  SHOW_ALERT,\r\n  HIDE_ALERT,\r\n  TErrorAlertActions,\r\n  TConfirmationActions,\r\n  TAlertActions,\r\n} from \"../actions\";\r\nimport { TErrorAlertPayload } from \"../../types/services\";\r\n\r\ninterface IErrState {\r\n  errors: TErrorAlertPayload[];\r\n}\r\n\r\ninterface IAlertState {\r\n  message: string;\r\n}\r\n\r\ninterface IConfirmState {\r\n  show: boolean;\r\n  text: string;\r\n}\r\n\r\nconst initialErrState: IErrState = {\r\n  errors: [],\r\n};\r\n\r\nconst initialAlertState: IAlertState = {\r\n  message: \"\",\r\n};\r\n\r\nconst initialConfirmState: IConfirmState = {\r\n  show: false,\r\n  text: \"\",\r\n};\r\n\r\nexport const errorAlertReducer = (\r\n  state = initialErrState,\r\n  action: TErrorAlertActions\r\n): IErrState => {\r\n  switch (action.type) {\r\n    case ALERT_ERROR:\r\n      return {\r\n        errors: [...state.errors, action.payload],\r\n      };\r\n    case CLEAR_ERROR:\r\n      return {\r\n        errors: [...state.errors.slice(1)],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const alertReducer = (\r\n  state = initialAlertState,\r\n  action: TAlertActions\r\n): IAlertState => {\r\n  switch (action.type) {\r\n    case SHOW_ALERT:\r\n      return {\r\n        message: action.payload,\r\n      };\r\n    case HIDE_ALERT:\r\n      return {\r\n        message: \"\",\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const confirmationReducer = (\r\n  state = initialConfirmState,\r\n  action: TConfirmationActions\r\n): IConfirmState => {\r\n  switch (action.type) {\r\n    case SHOW_CONFIRM:\r\n      return {\r\n        show: true,\r\n        text: action.payload,\r\n      };\r\n    case HIDE_CONFIRM:\r\n      return initialConfirmState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_MESSAGE,\n  TWsActions,\n} from \"../actions\";\nimport { IWsResApi } from \"../../types/common\";\n\ninterface IResApiOrders {\n  wsConnected: boolean;\n  resAll: IWsResApi | undefined;\n  resOwner: IWsResApi | undefined;\n  error?: Event;\n}\n\nconst initialOrders: IResApiOrders = {\n  wsConnected: false,\n  resAll: undefined,\n  resOwner: undefined,\n};\n\nexport const ordersReducer = (\n  state = initialOrders,\n  action: TWsActions\n): IResApiOrders => {\n  switch (action.type) {\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        error: action.payload,\n        wsConnected: false,\n      };\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...state,\n        error: undefined,\n        wsConnected: false,\n      };\n    case WS_GET_MESSAGE:\n      return {\n        ...state,\n        error: undefined,\n        resAll: action.payload.url.startsWith(\n          \"wss://norma.nomoreparties.space/orders/all\"\n        )\n          ? { ...action.payload.resApi }\n          : state.resAll,\n        resOwner: action.payload.url.startsWith(\n          \"wss://norma.nomoreparties.space/orders?token\"\n        )\n          ? { ...action.payload.resApi }\n          : state.resOwner,\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  menuReducer,\r\n  burgConstructorReducer,\r\n  orderDetailsReducer,\r\n} from \"./main\";\r\nimport { userDataReducer } from \"./user\";\r\nimport { requestReducer } from \"./requests\";\r\nimport {\r\n  errorAlertReducer,\r\n  confirmationReducer,\r\n  alertReducer,\r\n} from \"./interaction\";\r\nimport { ordersReducer } from \"./ws\";\r\n\r\nconst rootReducer = combineReducers({\r\n  menu: menuReducer,\r\n  burgConstructor: burgConstructorReducer,\r\n  orderDetails: orderDetailsReducer,\r\n  userData: userDataReducer,\r\n  request: requestReducer,\r\n  errorAlert: errorAlertReducer,\r\n  confirmation: confirmationReducer,\r\n  alert: alertReducer,\r\n  orders: ordersReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"../reducers\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { socketMiddleware } from \"../middlewares/socket-middleware\";\r\nimport { wsActionTypes } from \"../actions\";\r\nimport { BASE_URL_WS } from \"../../utils/data\";\r\n\r\nconst enhancer = composeWithDevTools(\r\n  applyMiddleware(thunk, socketMiddleware(BASE_URL_WS, wsActionTypes))\r\n);\r\n\r\nconst store = createStore(rootReducer, enhancer);\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/app/app';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from \"./services/store/store\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor\":\"burger-constructor_constructor__1e47d\",\"constructor__text\":\"burger-constructor_constructor__text__Q1in1\",\"constructor__container\":\"burger-constructor_constructor__container__3da0Q\",\"constructor__scroll\":\"burger-constructor_constructor__scroll__5JY2u\",\"constructor__confirm\":\"burger-constructor_constructor__confirm__1WLTB\",\"constructor__price\":\"burger-constructor_constructor__price__3B4v_\",\"constructor__price-value\":\"burger-constructor_constructor__price-value__3Qpb2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile-page_container__mSNh8\",\"form\":\"profile-page_form__1uIuX\",\"form__list\":\"profile-page_form__list__2aHPL\",\"form__input\":\"profile-page_form__input__eK8Z4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"stats_container__CeZWM\",\"state-container\":\"stats_state-container__3Dfqp\",\"state\":\"stats_state__3iQl9\",\"state__numbers\":\"stats_state__numbers__3Bqru\",\"state__number\":\"stats_state__number__2X7Hv\",\"state__number_color_green\":\"stats_state__number_color_green__WEZVP\",\"stats\":\"stats_stats__1CVCO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"window\":\"burg-ingr-scroll_window__2XuO4\",\"block\":\"burg-ingr-scroll_block__3juv3\",\"block__item\":\"burg-ingr-scroll_block__item__37_T6\",\"block__title\":\"burg-ingr-scroll_block__title__2lGq0\",\"cards\":\"burg-ingr-scroll_cards__2b1Bz\",\"cards__card\":\"burg-ingr-scroll_cards__card__3rfeh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"burg-ingr-card_card__1X7lB\",\"card__img\":\"burg-ingr-card_card__img__1xWwk\",\"card__box\":\"burg-ingr-card_card__box__7u6UW\",\"card__name\":\"burg-ingr-card_card__name__1_ZOG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"order-details_details__cfqGj\",\"details__order\":\"order-details_details__order__2_M6h\",\"details__text\":\"order-details_details__text__1VEsL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__1gmxv\",\"details__img\":\"ingredient-details_details__img__16duo\",\"details__name\":\"ingredient-details_details__name__1QwE0\",\"details__list\":\"ingredient-details_details__list__3XkCw\",\"details__item\":\"ingredient-details_details__item__2SCdi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form_form__3e_pg\",\"form__list\":\"form_form__list__2uITG\",\"form__input\":\"form_form__input__Jad1T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"page-404_container__3D3_A\",\"text\":\"page-404_text__3Jn04\",\"link\":\"page-404_link__19sfJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__3NVBC\",\"modal__container\":\"modal_modal__container__1Din9\",\"modal__title\":\"modal_modal__title__RpNNH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"alert_container__1vj0u\",\"title\":\"alert_title__FLogo\",\"text\":\"alert_text__3H0MB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"paragraph-link_container__1LUas\",\"paragraph-link\":\"paragraph-link_paragraph-link__1Rnpv\",\"link\":\"paragraph-link_link__1XYgM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"confirm_container__3Nilk\",\"text\":\"confirm_text__2XXNi\",\"buttons\":\"confirm_buttons__2MnAb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"feed-page_section__ohBsm\",\"title\":\"feed-page_title__1Aj6I\",\"container\":\"feed-page_container__1Nygp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"layout-with-header_layout__3Zw5R\",\"main\":\"layout-with-header_main__2RteE\"};"],"sourceRoot":""}