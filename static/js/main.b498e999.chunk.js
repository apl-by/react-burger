(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{102:function(e,t,n){e.exports={ingredients:"burger-ingredients_ingredients__3zpjU"}},103:function(e,t,n){e.exports={ingredient:"ingredient_ingredient__dAzqD",ingredient_hidden:"ingredient_ingredient_hidden__1o7g1"}},104:function(e,t,n){e.exports={container:"ingr-detail-page_container__1XK61",title:"ingr-detail-page_title__jlPaL"}},105:function(e,t,n){e.exports={feed:"feed_feed__1HUnA",feed_type_profile:"feed_feed_type_profile__34ITU"}},106:function(e,t,n){e.exports={section:"order-info-page_section__1fNEq",title:"order-info-page_title__2RUly",container:"order-info-page_container__1ywd3"}},137:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__1q1yX"}},139:function(e,t,n){e.exports={tabs:"burg-ingr-tabs_tabs__1UdZo"}},144:function(e,t,n){e.exports={container:"container_container__3FRHd"}},146:function(e,t,n){e.exports={container:"profile-orders-page_container__2tqX2"}},15:function(e,t,n){e.exports={item:"feed-item_item__ZhaYP","item__data-container":"feed-item_item__data-container__25Iz4",item__name:"feed-item_item__name__1ewyl",item__name_color_green:"feed-item_item__name_color_green__5C8RH",item__result:"feed-item_item__result__3G2Cp",item__ingredients:"feed-item_item__ingredients__2V1SZ",item__ingredient:"feed-item_item__ingredient__2rV3y",item__img:"feed-item_item__img__25rLk",item__count:"feed-item_item__count__42DcA",item__ellipsis:"feed-item_item__ellipsis__20ae0",item__price:"feed-item_item__price__3XTiD"}},158:function(e,t,n){},19:function(e,t,n){e.exports={header:"app-header_header__2mZfQ",header__logo:"app-header_header__logo__25jIg",nav:"app-header_nav__30JXW",nav__list:"app-header_nav__list__2dfm_",nav__item:"app-header_nav__item__3SbAn",nav__link:"app-header_nav__link__2OWy6",nav__link_active:"app-header_nav__link_active__3_pr2",nav__text:"app-header_nav__text__KDWKk"}},27:function(e,t,n){e.exports={order:"order-info_order__2DBNs",order__list:"order-info_order__list__20tMF",order__status:"order-info_order__status__TXpYy",order__status_color_greentext:"order-info_order__status_color_greentext__2qJev",order__item:"order-info_order__item__tGi0m",order__img:"order-info_order__img__2Ta59","order__item-name":"order-info_order__item-name__2NdjF",order__price:"order-info_order__price__2adZD","order__item-value":"order-info_order__item-value__kqrVg",order__value:"order-info_order__value__12dsj"}},31:function(e,t,n){e.exports={"profile-nav":"profile-nav_profile-nav__3kvNc",nav__list:"profile-nav_nav__list__T6CL3",nav__item:"profile-nav_nav__item__2DW_d",nav__link:"profile-nav_nav__link__3A2lF",nav__link_active:"profile-nav_nav__link_active__ICRyj",description:"profile-nav_description__1y0od"}},312:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(1),s=n.n(i),o=n(45),u=n.n(o),l=(n(158),n(98)),d=n.n(l),_=n(19),j=n.n(_),m=n(7),b=n(13),p=n(0),f=function(e){var t=e.isActive;return"".concat(j.a.nav__link," ").concat(t?j.a.nav__link_active:"text_color_inactive")},O=Object(i.memo)((function(){return Object(p.jsxs)("header",{className:"".concat(j.a.header," pt-4 pb-4"),children:[Object(p.jsx)("div",{className:j.a.header__logo,children:Object(p.jsx)(b.b,{to:"/",children:Object(p.jsx)(m.Logo,{})})}),Object(p.jsx)("nav",{className:j.a.nav,children:Object(p.jsxs)("ul",{className:j.a.nav__list,children:[Object(p.jsx)("li",{className:"".concat(j.a.nav__item," mr-2 pt-4 pb-4 pr-5 pl-5"),children:Object(p.jsxs)(b.c,{to:"/",className:f,children:[Object(p.jsx)(m.BurgerIcon,{type:"primary"}),Object(p.jsx)("span",{className:"".concat(j.a.nav__text," ml-2 text text_type_main-default"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(p.jsx)("li",{className:"".concat(j.a.nav__item," mr-2 pt-4 pb-4 pr-5 pl-5"),children:Object(p.jsxs)(b.c,{to:"/feed",className:f,children:[Object(p.jsx)(m.ListIcon,{type:"primary"}),Object(p.jsx)("span",{className:"".concat(j.a.nav__text," ml-2 text text_type_main-default"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})}),Object(p.jsx)("li",{className:"".concat(j.a.nav__item," mr-2 pt-4 pb-4 pr-5 pl-5"),children:Object(p.jsxs)(b.c,{to:"/profile",className:f,children:[Object(p.jsx)(m.ProfileIcon,{type:"primary"}),Object(p.jsx)("span",{className:"".concat(j.a.nav__text," ml-2 text text_type_main-default"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})]})})),h=O,x=n(73),v=n.n(x),g=n(137),y=n.n(g),N=function(e){var t=e.children,n=e.onClick;return Object(p.jsx)("div",{className:y.a.overlay,onClick:n,children:t})},k=function(e){var t=e.children,n=e.title,r=e.onClose,a=e.mod,c=void 0===a?"pb-15":a,s=e.modTitle,u=void 0===s?"text_type_main-large":s,l=Object(i.useCallback)((function(e){"Escape"===e.key&&r()}),[r]);Object(i.useEffect)((function(){return document.addEventListener("keyup",l),function(){return document.removeEventListener("keyup",l)}}),[l]);var d=function(){r()};return Object(o.createPortal)(Object(p.jsx)(N,{onClick:function(e){return e.target!==e.currentTarget||d()},children:Object(p.jsxs)("div",{className:"".concat(v.a.modal," pt-10 pr-10 pl-10 ").concat(c),children:[Object(p.jsxs)("div",{className:v.a.modal__container,children:[n&&Object(p.jsx)("h2",{className:"".concat(v.a.modal__title," text ").concat(u),children:n}),Object(p.jsx)(m.CloseIcon,{type:"primary",onClick:d})]}),t]})}),document.getElementById("react-modals"))},C=n(74),E=n.n(C),R=function(e){var t=e.title,n=e.message;return Object(p.jsxs)("div",{className:E.a.container,children:[t&&Object(p.jsx)("h2",{className:"".concat(E.a.title," text text_type_main-large mb-15"),children:t}),Object(p.jsx)("p",{className:"".concat(E.a.text,"  mb-15 text text_type_main-large"),children:n})]})},w=n(316),S=n(150),T=n(3),I=n(21),A=I.d,D=function(){return Object(I.c)()},U="ALERT_ERROR",F="CLEAR_ERROR",B="SHOW_CONFIRM",M="HIDE_CONFIRM",q="SHOW_ALERT",z="HIDE_ALERT",P=Object(i.memo)((function(){var e=D(),t=A((function(e){return e.errorAlert.errors})),n=A((function(e){return e.alert.message}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:d.a.layout,children:[Object(p.jsx)(h,{}),Object(p.jsx)(w.a,{backend:S.a,children:Object(p.jsx)("main",{className:d.a.main,children:Object(p.jsx)(T.b,{})})})]}),t.length>0&&Object(p.jsx)(k,{onClose:function(){e({type:F})},children:Object(p.jsx)(R,{title:"\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t[0].status),message:t[0].message})}),n&&Object(p.jsx)(k,{onClose:function(){e({type:z})},children:Object(p.jsx)(R,{message:n})})]})})),L=P,J=n(16),W=n(5),H=n(102),X=n.n(H),G=n(139),Q=n.n(G),V=function(e){var t=e.sections,n=e.tabIndex,r=e.onClick;return Object(p.jsx)("div",{className:Q.a.tabs,children:t.map((function(e){return Object(p.jsx)(m.Tab,{value:String(e.id),active:n===e.id,onClick:function(){return r(e.id)},children:e.section},e.id)}))})},Z=n(41),K=n.n(Z),Y=n(2),$=n(47),ee=n.n($),te=[{id:0,section:"\u0411\u0443\u043b\u043a\u0438",key:"bun"},{id:1,section:"\u0421\u043e\u0443\u0441\u044b",key:"sauce"},{id:2,section:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",key:"main"}],ne=[{id:0,sign:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",key:"calories"},{id:1,sign:"\u0411\u0435\u043b\u043a\u0438, \u0433",key:"proteins"},{id:2,sign:"\u0416\u0438\u0440\u044b, \u0433",key:"fat"},{id:3,sign:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",key:"carbohydrates"}],re="burgIngredient",ae="ingrConstructor",ce={name:"accessToken",options:{"max-age":604800}},ie={name:"refreshToken",options:{"max-age":604800}},se=n(318),oe=Object(i.memo)((function(e){var t=e.cardData,n=Object(T.h)(),r=Object(T.g)().pathname,a=A((function(e){var t;return null===(t=e.burgConstructor.bun)||void 0===t?void 0:t._id})),c=A((function(e){var n;return null===(n=e.burgConstructor.ingrCounter)||void 0===n?void 0:n[t._id]})),s=Object(se.a)({type:re,item:Object(Y.a)({},t)}),o=Object(W.a)(s,2)[1],u=Object(i.useMemo)((function(){return"bun"===t.type?a===t._id?2:void 0:c}),[a,c,t._id,t.type]);return Object(p.jsxs)("div",{className:ee.a.card,onClick:function(){n("/ingredients/".concat(t._id),{state:{background:{pathname:r,key:t._id}}})},ref:o,children:[u&&Object(p.jsx)(m.Counter,{count:u,size:"default"}),Object(p.jsx)("img",{src:t.image,alt:t.name,className:"".concat(ee.a.card__img," ml-4 mr-4")}),Object(p.jsxs)("div",{className:"".concat(ee.a.card__box," mt-1 mb-1"),children:[Object(p.jsx)("p",{className:"".concat(ee.a.card__price," mr-2 text text_type_digits-default"),children:t.price}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("p",{className:"".concat(ee.a.card__name," mr-2 text text_type_main-default"),children:t.name})]})})),ue=oe,le=n(149),de=n(72),_e=n(152),je=n(151),me=function(e){return Object.values(e).some((function(e){return""===e}))},be=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=Object(W.a)(e,2),n=t[0];return""===t[1]?[n,!0]:[n,!1]})))},pe=function(e){return Object.values(e).some((function(e){return e}))},fe=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},Oe=function(e,t,n){(n=Object(Y.a)({path:"/"},n)).expires instanceof Date&&(n.expires=n.expires.toUTCString());var r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(var a in n){r+="; "+a;var c=n[a];!0!==c&&(r+="="+c)}document.cookie=r},he=function(e,t){var n=e._id,r=e.name,a=e.number,c="created"===e.status?"\u0421\u043e\u0437\u0434\u0430\u043d":"pending"===e.status?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"done"===e.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d",i=new Date,s=Object(_e.a)(e.createdAt),o=Object(de.a)(i,s),u=2===o?"2 \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434,":3===o?"3 \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434,":"P','",l={lastWeek:u+" p 'i-'O",yesterday:"'\u0412\u0447\u0435\u0440\u0430,' p 'i-'O",today:"'\u0421\u0435\u0433\u043e\u0434\u043d\u044f,' p 'i-'O",tomorrow:"'\u0417\u0430\u0432\u0442\u0440\u0430,' p 'i-'O",nextWeek:"P',' p 'i-'O",other:u+" p 'i-'O"},d=Object(le.a)(s,i,{locale:Object(Y.a)(Object(Y.a)({},je.a),{},{formatRelative:function(e){return l[e]}})}),_=e.ingredients.reduce((function(e,t){return e[t]?e[t]+=1:e[t]=1,e}),{}),j=Object.entries(_).map((function(e){var n=Object(W.a)(e,2),r=n[0],a=n[1],c=t.find((function(e){return e._id===r}));return c&&(c.count=a),c})).filter((function(e){return e})),m=j.reduce((function(e,t){return e+t.price*t.count}),0);return{_id:n,name:r,number:a,status:c,time:d,ingrForRender:j,totalPrice:m}},xe=n(141),ve=n.n(xe),ge=function(e){var t=e.sections,n=e.sectionAnchor,r=e.containerAnchor,a=e.onScroll,c=A((function(e){return e.menu})).menu,s=Object(i.useMemo)((function(){return c.reduce((function(e,t){return"bun"===t.type?e.bun.push(t):"sauce"===t.type?e.sauce.push(t):"main"===t.type&&e.main.push(t),e}),{bun:[],sauce:[],main:[]})}),[c]);return Object(p.jsx)("div",{className:K.a.window,onScroll:ve()(a,100),ref:r,children:Object(p.jsx)("ul",{className:K.a.block,children:t.map((function(e,t){return Object(p.jsxs)("li",{className:K.a.block__item,children:[Object(p.jsx)("h2",{className:"".concat(K.a.block__title," mt-10 mb-6 text text_type_main-medium"),ref:function(e){return e?n.current[t]=e:null},children:e.section}),Object(p.jsx)("ul",{className:"".concat(K.a.cards," pr-2 pl-4"),children:s[e.key].map((function(e){return Object(p.jsx)("li",{className:K.a.cards__card,children:Object(p.jsx)(ue,{cardData:e})},e._id)}))})]},e.id)}))})})},ye=Object(i.memo)((function(){var e=Object(i.useRef)(null),t=Object(i.useRef)([]),n=Object(i.useState)(0),r=Object(W.a)(n,2),a=r[0],c=r[1];return Object(p.jsxs)("section",{className:X.a.ingredients,children:[Object(p.jsx)("h1",{className:"".concat(X.a.ingredients__title," text text_type_main-large mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(V,{sections:te,tabIndex:a,onClick:function(n){if(null!==e.current){c(n);var r=e.current.getBoundingClientRect().top,a=t.current[n].getBoundingClientRect().top-r-40;e.current.scrollBy({top:a,behavior:"smooth"})}}}),Object(p.jsx)(ge,{sections:te,sectionAnchor:t,containerAnchor:e,onScroll:function(){if(null!==e.current){var n=e.current.getBoundingClientRect().top,r=t.current.map((function(e){return e.getBoundingClientRect().top-n})).findIndex((function(e,t,n){return Math.abs(e)===Math.min.apply(Math,Object(J.a)(n.map((function(e){return Math.abs(e)}))))}));c(r)}}})]})})),Ne=n(35),ke=n.n(Ne),Ce=function(e){var t=e.type,n=e.text,r=A((function(e){return e.burgConstructor.bun}));return null===r?Object(p.jsx)(p.Fragment,{children:null}):Object(p.jsx)(m.ConstructorElement,{type:t,isLocked:!0,text:"".concat(r.name," (").concat(n,")"),price:r.price,thumbnail:r.image_mobile})},Ee=n(103),Re=n.n(Ee),we="MENU_REQUEST",Se="MENU_SUCCESS",Te="MENU_ERROR",Ie="ADD_BUN",Ae="REMOVE_BUN",De="ADD_INGREDIENT",Ue="REMOVE_INGREDIENT",Fe="MOVE_INGREDIENT",Be="CLEAR_CONSTRUCTOR",Me="ORDER_REQUEST",qe="ORDER_SUCCESS",ze="ORDER_ERROR",Pe="CLOSE_ORDER_DETAILS",Le=n(319),Je=function(e){var t=e.ind,n=e.data,r=A((function(e){return e.burgConstructor.ingredients})),a=D(),c=Object(i.useRef)(null),s=Object(Le.a)({accept:ae,hover:function(e){if(c.current){var n=e.index,r=t;n!==r&&(j(n,r),e.index=r)}}}),o=Object(W.a)(s,2)[1],u=Object(se.a)({type:ae,item:{index:t},collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(W.a)(u,2),d=l[0].isDragging,_=l[1],j=function(e,t){var n=r[e],c=Object(J.a)(r),i=c.splice(t,1,n);c.splice(e,1,i[0]),a({type:Fe,payload:c})},b=d?"ingredient_hidden":"";return _(o(c)),Object(p.jsxs)("li",{className:"".concat(Re.a.ingredient," ").concat(Re.a[b]),ref:c,children:[Object(p.jsx)(m.DragIcon,{type:"primary"}),Object(p.jsx)(m.ConstructorElement,{text:n.name,price:n.price,thumbnail:n.image_mobile,handleClose:function(){return function(e){a({type:Ue,payload:e})}(t)}})]})},We=n(48),He=n.n(We),Xe=n.p+"static/media/modal-done.dc2f52b0.png",Ge=function(){var e=A((function(e){var t,n,r;return null===(t=e.orderDetails)||void 0===t||null===(n=t.orderRes)||void 0===n||null===(r=n.order)||void 0===r?void 0:r.number}));return Object(p.jsxs)("div",{className:He.a.details,children:[Object(p.jsx)("p",{className:"".concat(He.a.details__order," text text_type_digits-large"),children:e}),Object(p.jsx)("p",{className:"".concat(He.a.details__text," mt-8 mb-15 text text_type_main-medium"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{src:Xe,alt:"\u0417\u0430\u043a\u0430\u0437 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"}),Object(p.jsx)("p",{className:"".concat(He.a.details__text," mt-15 mb-2 text text_type_main-default"),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("p",{className:"".concat(He.a.details__text," text text_type_main-default text_color_inactive"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Qe=n(26),Ve=n.n(Qe),Ze=n(40),Ke=n(142),Ye=n(143),$e={_headers:{"Content-type":"application/json"},_baseUrl:"https://norma.nomoreparties.space/api"},et=new(function(){function e(t){Object(Ke.a)(this,e),this._headers=void 0,this._baseUrl=void 0,this._headers=t._headers,this._baseUrl=t._baseUrl}return Object(Ye.a)(e,[{key:"_handleResToJson",value:function(e){return e.json().then((function(t){return{ok:e.ok,status:e.status,body:t}}))}},{key:"_handleResponse",value:function(e){return e.ok?e.body:Promise.reject({status:e.status,message:e.body.message})}},{key:"getMenu",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/ingredients")).then((function(t){return e._handleResToJson(t)})).then((function(t){return e._handleResponse(t)}))}},{key:"postOrder",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/orders"),{method:"POST",headers:Object(Y.a)(Object(Y.a)({},this._headers),{},{Authorization:"Bearer "+t}),body:JSON.stringify(e)}).then((function(e){return n._handleResToJson(e)})).then((function(e){return n._handleResponse(e)}))}},{key:"confirmEmail",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/password-reset"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"resetPassword",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/password-reset/reset"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"login",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/login"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"register",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/register"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"logout",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/logout"),{method:"POST",headers:this._headers,body:JSON.stringify({token:e})}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"refreshToken",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/token"),{method:"POST",headers:this._headers,body:JSON.stringify({token:e})}).then((function(e){return t._handleResToJson(e)})).then((function(e){var t=ce,n=ie;Oe(t.name,e.body.accessToken.replace("Bearer ",""),t.options),Oe(n.name,e.body.refreshToken,n.options)}))}},{key:"getUser",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/user"),{headers:Object(Y.a)(Object(Y.a)({},this._headers),{},{Authorization:"Bearer "+e})}).then((function(e){return t._handleResToJson(e)})).then((function(e){return t._handleResponse(e)}))}},{key:"patchUser",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/auth/user"),{method:"PATCH",headers:Object(Y.a)(Object(Y.a)({},this._headers),{},{Authorization:"Bearer "+e}),body:JSON.stringify(t)}).then((function(e){return n._handleResToJson(e)})).then((function(e){return n._handleResponse(e)}))}}]),e}())($e),tt=function(e,t){return et.postOrder(function(e){return{ingredients:Object(J.a)(e.map((function(e){return e._id})))}}(t),fe("accessToken")).then((function(t){if(!t.success)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");Object(I.b)((function(){e({type:qe,payload:t}),e({type:Be})}))}))},nt=function(e,t){Object(I.b)((function(){e({type:ze}),e({type:U,payload:t})}))},rt=Object(i.memo)((function(){var e=Object(T.g)(),t=Object(T.h)(),n=A((function(e){return e.userData})).isAuthorized,r=A((function(e){return e.burgConstructor})),a=r.ingredients,c=r.bun,s=r.empty,o=A((function(e){return e.orderDetails})),u=o.isModalOpen,l=o.canSubmit,d=D(),_=Object(Le.a)({accept:re,drop:function(e){b(e)}}),j=Object(W.a)(_,2)[1],b=function(e){"bun"===e.type?d({type:Ie,payload:e}):d({type:De,payload:Object(Y.a)(Object(Y.a)({},e),{},{uniqueId:Math.random().toString(36).substr(2,12)})})},f=Object(i.useMemo)((function(){return function(e,t){var n=t.reduce((function(e,t){return e+t.price}),0);return e?2*e.price+n:n}(c,a)}),[c,a]),O=Object(i.useCallback)((function(){d({type:Pe})}),[d]);return Object(p.jsxs)("section",{className:"".concat(ke.a.constructor," pt-25 pr-2 pl-4 ml-10"),ref:j,children:[s&&Object(p.jsx)("p",{className:"".concat(ke.a.constructor__text," text text_type_main-medium text_color_inactive"),children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435\n \u0432 \u0434\u0430\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"}),!s&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:ke.a.constructor__container,children:[c&&Object(p.jsx)(Ce,{type:"top",text:"\u0432\u0435\u0440\u0445"}),Object(p.jsx)("ul",{className:"".concat(ke.a.constructor__scroll," mt-4 mb-4"),children:a.map((function(e,t){return Object(p.jsx)(Je,{data:e,ind:t},e.uniqueId)}))}),c&&Object(p.jsx)(Ce,{type:"bottom",text:"\u043d\u0438\u0437"})]}),Object(p.jsxs)("div",{className:"".concat(ke.a.constructor__confirm," mt-10"),children:[Object(p.jsxs)("div",{className:"".concat(ke.a.constructor__price," mr-10"),children:[Object(p.jsx)("span",{className:"".concat(ke.a["constructor__price-value"]," text text_type_digits-default"),children:f}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)(m.Button,{type:"primary",size:"medium",onClick:function(r){if(r.preventDefault(),!n)return t("/login",{state:{from:e.pathname}});var i;l&&d(c?(i=[c].concat(Object(J.a)(a)),function(){var e=Object(Ze.a)(Ve.a.mark((function e(t){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Me,payload:i}),e.prev=1,e.next=4,tt(t,i);case 4:e.next=22;break;case 6:if(e.prev=6,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=21;break}return e.prev=9,e.next=12,et.refreshToken(fe("refreshToken"));case 12:return e.next=14,tt(t,i);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),nt(t,e.t1);case 19:e.next=22;break;case 21:nt(t,e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,6],[9,16]])})));return function(t){return e.apply(this,arguments)}}()):{type:q,payload:"\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u0432\u044b \u0437\u0430\u0431\u044b\u043b\u0438 \u0431\u0443\u043b\u043a\u0443..."})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]}),u&&Object(p.jsx)(k,{onClose:O,mod:"pb-30",children:Object(p.jsx)(Ge,{})})]})})),at=rt,ct=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ye,{}),Object(p.jsx)(at,{})]})},it=n(10),st=n(144),ot=n.n(st),ut=function(e){var t=e.children,n=e.mod,r=void 0===n?"":n;return Object(p.jsx)("div",{className:"".concat(ot.a.container," ").concat(r),children:t})},lt=n(57),dt=n.n(lt),_t=function(e){var t=e.children,n=e.onSubmit,r=e.title,a=e.btnName,c=i.Children.toArray(t);return Object(p.jsxs)("form",{className:"".concat(dt.a.form," pb-20"),onSubmit:n,children:[Object(p.jsx)("h2",{className:"".concat(dt.a.form__title," text text_type_main-medium"),children:r}),Object(p.jsx)("ul",{className:"".concat(dt.a.form__list," mt-6 mb-6"),children:c.map((function(e){return Object(p.jsx)("li",{className:"".concat(dt.a.form__input," mb-6"),children:e},e.key)}))}),Object(p.jsx)(m.Button,{type:"primary",size:"medium",children:a})]})},jt=n(75),mt=n.n(jt),bt=function(e){var t=e.children,n=e.link,r=e.to,a=e.mod,c=void 0===a?"":a;return Object(p.jsxs)("div",{className:"".concat(mt.a.container," text text_type_main-default text_color_inactive ").concat(c),children:[Object(p.jsx)("p",{className:mt.a["paragraph-link"],children:t}),Object(p.jsx)(b.b,{to:r,className:mt.a.link,children:n})]})},pt=function(e){var t=e.value,n=e.onChange,r=e.name,a=e.icon,c=e.placeholder,s=void 0===c?"E-mail":c,o=e.size,u=void 0===o?"default":o,l=e.disabled,d=void 0!==l&&l,_=e.error,j=e.setError,b=Object(i.useState)(d),f=Object(W.a)(b,2),O=f[0],h=f[1],x=Object(i.useRef)(null);return Object(p.jsx)(m.Input,{type:"email",placeholder:s,onChange:n,icon:a,value:t,ref:x,onBlur:function(e){e.target.value?function(e){j((function(t){return Object(Y.a)(Object(Y.a)({},t),{},Object(it.a)({},r,!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)))}))}(e.target.value):j((function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(it.a)({},r,!1))})),d&&h(!0)},onFocus:function(){j((function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(it.a)({},r,!1))}))},name:r,error:_,disabled:O,onIconClick:function(){h(!1),setTimeout((function(){var e;return null===(e=x.current)||void 0===e?void 0:e.focus()}),0)},errorText:""===t?"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0412\u0430\u0448 email":"\u041e\u0439, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",size:u})},ft=function(e){var t=e.value,n=e.onChange,r=e.name,a=e.icon,c=e.placeholder,s=void 0===c?"\u041f\u0430\u0440\u043e\u043b\u044c":c,o=e.disabled,u=void 0!==o&&o,l=e.size,d=void 0===l?"default":l,_=e.error,j=e.setError,b=Object(i.useState)(u),f=Object(W.a)(b,2),O=f[0],h=f[1],x=Object(i.useState)(!1),v=Object(W.a)(x,2),g=v[0],y=v[1],N=Object(i.useRef)(null),k=Object(i.useMemo)((function(){return a||(g?"ShowIcon":"HideIcon")}),[a,g]);return Object(p.jsx)(m.Input,{type:g?"text":"password",placeholder:s,onChange:n,icon:k,value:t,ref:N,onBlur:function(e){e.target.value?function(e){j((function(t){return Object(Y.a)(Object(Y.a)({},t),{},Object(it.a)({},r,e.length<6))}))}(e.target.value):j((function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(it.a)({},r,!1))})),"EditIcon"===k&&h(!0),"ShowIcon"===k&&y(!1)},onFocus:function(){j((function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(it.a)({},r,!1))}))},name:r,error:_,disabled:O,onIconClick:function(){"EditIcon"===k&&h(!1),"HideIcon"===k&&y(!0),setTimeout((function(){var e;return null===(e=N.current)||void 0===e?void 0:e.focus()}),0)},errorText:""===t?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",size:d})},Ot="START_REQUEST",ht="END_REQUEST",xt="USER_REQUEST",vt="USER_SUCCESS",gt="USER_ERROR",yt="UPDATE_USER_REQUEST",Nt="UPDATE_USER_SUCCESS",kt="UPDATE_USER_ERROR",Ct="LOGOUT_REQUEST",Et="LOGOUT",Rt=function(e){return et.getUser(fe("accessToken")).then((function(t){if(!t.success)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e({type:vt,payload:t.user})}))},wt=function(e,t){var n;e({type:gt}),console.log("Error ".concat(null!==(n=t.status)&&void 0!==n?n:"",": ").concat(t.message))},St=function(){return function(){var e=Object(Ze.a)(Ve.a.mark((function e(t){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:xt}),e.prev=1,e.next=4,Rt(t);case 4:e.next=22;break;case 6:if(e.prev=6,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=21;break}return e.prev=9,e.next=12,et.refreshToken(fe("refreshToken"));case 12:return e.next=14,Rt(t);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),wt(t,e.t1);case 19:e.next=22;break;case 21:wt(t,e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,6],[9,16]])})));return function(t){return e.apply(this,arguments)}}()},Tt=function(e,t){return et.patchUser(fe("accessToken"),t).then((function(t){if(!t.success)throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445");e({type:Nt,payload:t.user})}))},It=function(e,t){var n;e({type:kt}),console.log("Error ".concat(null!==(n=t.status)&&void 0!==n?n:"",": ").concat(t.message))},At=function(){return function(e){return e({type:Ct}),et.logout(fe("refreshToken")).then((function(e){if(!e.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");console.log("\u0412\u044b\u0445\u043e\u0434 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0439")})).catch((function(e){var t;console.log("Error ".concat(null!==(t=e.status)&&void 0!==t?t:"",": ").concat(e.message))})).finally((function(){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Oe(e,"",{"max-age":-1})}))}("refreshToken","accessToken"),e({type:Et})}))}},Dt=function(){var e,t=D(),n=Object(T.g)(),r=A((function(e){return e.userData})),a=r.isAuthorized,c=r.wasInitialAuth,s=A((function(e){return e.request.isRequest})),o=Object(i.useState)({email:"",password:""}),u=Object(W.a)(o,2),l=u[0],d=u[1],_=Object(i.useState)({email:!1,password:!1}),j=Object(W.a)(_,2),m=j[0],b=j[1],f=function(e){var t=e.target,n=t.name,r=t.value;d(Object(Y.a)(Object(Y.a)({},l),{},Object(it.a)({},n,r)))};return a?Object(p.jsx)(T.a,{to:n.state?null===(e=n.state)||void 0===e?void 0:e.from:"/"}):c?Object(p.jsxs)(ut,{children:[Object(p.jsxs)(_t,{btnName:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0445\u043e\u0434",onSubmit:function(e){var n;(e.preventDefault(),me(l))?b((function(e){return Object(Y.a)(Object(Y.a)({},e),be(l))})):s||pe(m)||t((n=l,function(e){return e({type:Ot}),et.login(n).then((function(t){if(!t.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");var n=ce,r=ie;Oe(n.name,t.accessToken.replace("Bearer ",""),n.options),Oe(r.name,t.refreshToken,r.options),e(St())})).catch((function(t){return e({type:U,payload:t})})).finally((function(){return e({type:ht})}))}))},children:[Object(p.jsx)(pt,{onChange:f,value:l.email,name:"email",error:m.email,setError:b}),Object(p.jsx)(ft,{onChange:f,value:l.password,name:"password",error:m.password,setError:b})]}),Object(p.jsx)(bt,{link:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",to:"/register",mod:"mb-4",children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(p.jsx)(bt,{link:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",to:"/forgot-password",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]}):Object(p.jsx)(p.Fragment,{children:null})},Ut=function(e){var t=e.value,n=e.onChange,r=e.name,a=e.icon,c=e.placeholder,s=void 0===c?"\u0418\u043c\u044f":c,o=e.size,u=void 0===o?"default":o,l=e.disabled,d=void 0!==l&&l,_=e.error,j=e.setError,b=Object(i.useState)(d),f=Object(W.a)(b,2),O=f[0],h=f[1],x=Object(i.useRef)(null);return Object(p.jsx)(m.Input,{type:"text",placeholder:s,onChange:n,icon:a,value:t,ref:x,onBlur:function(){d&&h(!0)},onFocus:function(){j((function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(it.a)({},r,!1))}))},name:r,error:_,disabled:O,onIconClick:function(){h(!1),setTimeout((function(){var e;return null===(e=x.current)||void 0===e?void 0:e.focus()}),0)},errorText:""===t?"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430":"\u041e\u0439, \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430!",size:u})},Ft=n(76),Bt=n.n(Ft),Mt=function(e){var t=e.text,n=e.btnTrue,r=e.btnFalse,a=e.onConfirm,c=e.onCancel;return Object(p.jsxs)("div",{className:Bt.a.container,children:[Object(p.jsx)("p",{className:"".concat(Bt.a.text," mb-15 text text_type_main-medium"),children:t}),Object(p.jsxs)("div",{className:Bt.a.buttons,children:[Object(p.jsx)(m.Button,{type:"secondary",size:"medium",onClick:c,children:r}),Object(p.jsx)(m.Button,{type:"primary",size:"medium",onClick:a,children:n})]})]})},qt=function(){var e=Object(I.c)();return{confirm:function(t){return e({type:B,payload:t}),new Promise((function(e,t){r=e}))},onConfirm:function(){e({type:M}),r(!0)},onCancel:function(){e({type:M}),r(!1)}}},zt=function(){var e,t=D(),n=Object(T.g)(),r=A((function(e){return e.userData})),a=r.isAuthorized,c=r.wasInitialAuth,s=A((function(e){return e.request.isRequest})),o=A((function(e){return e.confirmation})),u=o.show,l=o.text,d=qt(),_=d.confirm,j=d.onConfirm,m=d.onCancel,b=Object(i.useState)({name:"",email:"",password:""}),f=Object(W.a)(b,2),O=f[0],h=f[1],x=Object(i.useState)({name:!1,email:!1,password:!1}),v=Object(W.a)(x,2),g=v[0],y=v[1],N=function(e){var t=e.target,n=t.name,r=t.value;h(Object(Y.a)(Object(Y.a)({},O),{},Object(it.a)({},n,r)))};return a?Object(p.jsx)(T.a,{to:n.state?null===(e=n.state)||void 0===e?void 0:e.from:"/"}):c?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(ut,{children:[Object(p.jsxs)(_t,{btnName:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",onSubmit:function(e){e.preventDefault(),me(O)?y((function(e){return Object(Y.a)(Object(Y.a)({},e),be(O))})):s||pe(g)||t(function(e,t){return function(n){return n({type:Ot}),et.register(e).then(function(){var e=Object(Ze.a)(Ve.a.mark((function e(r){var a,c;return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.success){e.next=14;break}return e.next=3,t("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c! \n \u0416\u0435\u043b\u0430\u0435\u0442\u0435 \u0432\u043e\u0439\u0442\u0438?");case 3:if(!e.sent){e.next=11;break}c=ie,Oe((a=ce).name,r.accessToken.replace("Bearer ",""),a.options),Oe(c.name,r.refreshToken,c.options),n(St()),e.next=12;break;case 11:return e.abrupt("return");case 12:e.next=15;break;case 14:throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return n({type:U,payload:e})})).finally((function(){return n({type:ht})}))}}(O,_))},children:[Object(p.jsx)(Ut,{onChange:N,value:O.name,name:"name",error:g.name,setError:y}),Object(p.jsx)(pt,{onChange:N,value:O.email,name:"email",error:g.email,setError:y}),Object(p.jsx)(ft,{onChange:N,value:O.password,name:"password",error:g.password,setError:y})]}),Object(p.jsx)(bt,{link:"\u0412\u043e\u0439\u0442\u0438",to:"/login",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"})]}),u&&Object(p.jsx)(k,{onClose:m,children:Object(p.jsx)(Mt,{text:l,btnTrue:"\u0412\u043e\u0439\u0442\u0438",btnFalse:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u043d\u0435 \u0441\u0435\u0439\u0447\u0430\u0441",onConfirm:j,onCancel:m})})]}):Object(p.jsx)(p.Fragment,{children:null})},Pt=function(){var e=D(),t=A((function(e){return e.userData})),n=t.isAuthorized,r=t.wasInitialAuth,a=A((function(e){return e.request.isRequest})),c=Object(T.h)(),s=Object(i.useState)({email:""}),o=Object(W.a)(s,2),u=o[0],l=o[1],d=Object(i.useState)({email:!1}),_=Object(W.a)(d,2),j=_[0],m=_[1];return n?Object(p.jsx)(T.a,{to:"/"}):r?Object(p.jsxs)(ut,{children:[Object(p.jsx)(_t,{btnName:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",onSubmit:function(t){t.preventDefault(),me(u)?m((function(e){return Object(Y.a)(Object(Y.a)({},e),be(u))})):a||pe(j)||e(function(e,t){return function(n){return n({type:Ot}),et.confirmEmail(e).then((function(e){if(!e.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u041e\u0448\u0438\u0431\u043a\u0430");t("/reset-password",{state:{from:"/reset-password"}})})).catch((function(e){n({type:U,payload:e})})).finally((function(){return n({type:ht})}))}}(u,c))},children:Object(p.jsx)(pt,{onChange:function(e){var t=e.target,n=t.name,r=t.value;l(Object(Y.a)(Object(Y.a)({},u),{},Object(it.a)({},n,r)))},value:u.email,name:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",error:j.email,setError:m})}),Object(p.jsx)(bt,{link:"\u0412\u043e\u0439\u0442\u0438",to:"/login",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]}):Object(p.jsx)(p.Fragment,{children:null})},Lt=function(){var e,t=Object(T.g)(),n=D(),r=A((function(e){return e.userData})),a=r.isAuthorized,c=r.wasInitialAuth,s=A((function(e){return e.request.isRequest})),o=Object(i.useState)({token:"",password:""}),u=Object(W.a)(o,2),l=u[0],d=u[1],_=Object(i.useState)({password:!1,token:!1}),j=Object(W.a)(_,2),m=j[0],b=j[1],f=function(e){var t=e.target,n=t.name,r=t.value;d(Object(Y.a)(Object(Y.a)({},l),{},Object(it.a)({},n,r)))};return a?Object(p.jsx)(T.a,{to:"/"}):"/reset-password"!==(null===(e=t.state)||void 0===e?void 0:e.from)?Object(p.jsx)(T.a,{to:"/forgot-password"}):c?Object(p.jsxs)(ut,{children:[Object(p.jsxs)(_t,{btnName:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",onSubmit:function(e){var t;(e.preventDefault(),me(l))?b((function(e){return Object(Y.a)(Object(Y.a)({},e),be(l))})):s||pe(m)||(n((t=l,function(e){return e({type:Ot}),et.resetPassword(t).then((function(t){if(!t.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");e({type:q,payload:"\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d"})})).catch((function(t){return e({type:U,payload:t})})).finally((function(){return e({type:ht})}))})),d({token:"",password:""}))},children:[Object(p.jsx)(ft,{onChange:f,value:l.password,name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",error:m.password,setError:b}),Object(p.jsx)(Ut,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:f,value:l.token,name:"token",error:m.token,setError:b})]}),Object(p.jsx)(bt,{link:"\u0412\u043e\u0439\u0442\u0438",to:"/login",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]}):Object(p.jsx)(p.Fragment,{children:null})},Jt=n(36),Wt=n.n(Jt),Ht=n(31),Xt=n.n(Ht),Gt=function(e){var t=e.isActive;return"".concat(Xt.a.nav__link," ").concat(t?Xt.a.nav__link_active:"text_color_inactive"," text text_type_main-medium")},Qt=function(e){var t=e.mix,n=D();return Object(p.jsxs)("nav",{className:"".concat(Xt.a["profile-nav"]," ").concat(t),children:[Object(p.jsxs)("ul",{className:Xt.a.nav__list,children:[Object(p.jsx)("li",{className:Xt.a.nav__item,children:Object(p.jsx)(b.c,{to:"/profile",className:Gt,end:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(p.jsx)("li",{className:Xt.a.nav__item,children:Object(p.jsx)(b.c,{to:"/profile/orders",className:Gt,end:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(p.jsx)("li",{className:Xt.a.nav__item,children:Object(p.jsx)(b.c,{to:"/login",onClick:function(e){e.preventDefault(),n(At())},className:Gt,end:!0,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(p.jsx)("p",{className:"".concat(Xt.a.description," text_color_inactive text text_type_main-default mt-20"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})},Vt=n(145),Zt=n.n(Vt),Kt=function(){var e=Object(i.useRef)(null),t=D(),n=A((function(e){return e.userData.user?e.userData.user:{name:"",email:""}})),r=n.name,a=n.email,c=A((function(e){return e.userData.userRequest})),s=Object(i.useState)({name:r,email:a,password:"123456"}),o=Object(W.a)(s,2),u=o[0],l=o[1],d=Object(i.useState)({name:!1,email:!1,password:!1}),_=Object(W.a)(d,2),j=_[0],b=_[1],f=b,O=Object(i.useState)(!1),h=Object(W.a)(O,2),x=h[0],v=h[1];Object(i.useEffect)((function(){return l(Object(Y.a)(Object(Y.a)({},u),{},{name:r,email:a}))}),[r,a]),Object(i.useEffect)((function(){var t=e.current;null!==t&&r===t.name&&a===t.email||(e.current=u),v(!Zt()(e.current,u))}),[u,r,a]);var g=function(e){var t=e.target,n=t.name,r=t.value;l(Object(Y.a)(Object(Y.a)({},u),{},Object(it.a)({},n,r)))};return Object(p.jsxs)("div",{className:Wt.a.container,children:[Object(p.jsx)(Qt,{}),Object(p.jsxs)("form",{className:Wt.a.form,onSubmit:function(e){var n;(e.preventDefault(),c||pe(j))||(me(u)?b((function(e){return Object(Y.a)(Object(Y.a)({},e),be(u))})):t((n=u,function(){var e=Object(Ze.a)(Ve.a.mark((function e(t){return Ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:yt}),e.prev=1,e.next=4,Tt(t,n);case 4:e.next=22;break;case 6:if(e.prev=6,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=21;break}return e.prev=9,e.next=12,et.refreshToken(fe("refreshToken"));case 12:return e.next=14,Tt(t,n);case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(9),It(t,e.t1);case 19:e.next=22;break;case 21:It(t,e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,6],[9,16]])})));return function(t){return e.apply(this,arguments)}}())))},children:[Object(p.jsxs)("ul",{className:"".concat(Wt.a.form__list),children:[Object(p.jsx)("li",{className:"".concat(Wt.a.form__input," mb-6"),children:Object(p.jsx)(Ut,{onChange:g,value:u.name,name:"name",icon:"EditIcon",disabled:!0,error:j.name,setError:f})}),Object(p.jsx)("li",{className:"".concat(Wt.a.form__input," mb-6"),children:Object(p.jsx)(pt,{onChange:g,value:u.email,name:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon",disabled:!0,error:j.email,setError:f})}),Object(p.jsx)("li",{className:"".concat(Wt.a.form__input," mb-6"),children:Object(p.jsx)(ft,{onChange:g,value:u.password,name:"password",icon:"EditIcon",disabled:!0,error:j.password,setError:f})})]}),x&&Object(p.jsxs)("div",{className:Wt.a.form__buttons,children:[Object(p.jsx)(m.Button,{type:"secondary",size:"medium",onClick:function(t){null!==e.current&&(t.preventDefault(),l(e.current),f({name:!1,email:!1,password:!1}))},children:'"\u041e\u0442\u043c\u0435\u043d\u0430"'}),Object(p.jsx)(m.Button,{type:"primary",size:"medium",children:'"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"'})]})]})]})},Yt=n(58),$t=n.n(Yt),en=function(){return Object(p.jsxs)("div",{className:$t.a.container,children:[Object(p.jsx)("h1",{className:"".concat($t.a.title," text text_type_main-large text_color_inactive"),children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(p.jsx)("p",{className:"".concat($t.a.text," text text_type_digits-large"),children:"404"}),Object(p.jsx)(b.b,{to:"/",className:"".concat($t.a.link," text text_type_main-default"),children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u2794"})]})},tn="WS_CONNECTION_START",nn="WS_CONNECTION_SUCCESS",rn="WS_CONNECTION_ERROR",an="WS_CONNECTION_CLOSED",cn="WS_GET_MESSAGE",sn={wsInit:tn,onOpen:nn,onClose:an,onError:rn,onMessage:cn},on=function(e){var t=e.children,n=e.to,r=Object(T.g)(),a=D(),c=A((function(e){return e.userData.isAuthorized})),s=Object(i.useMemo)((function(){return r.pathname.includes("/orders")}),[r]);return Object(i.useEffect)((function(){if(c&&s)return a({type:tn,payload:"/orders?token=".concat(fe("accessToken"))}),function(){a({type:an})}}),[c,s,a]),c?Object(p.jsx)(p.Fragment,{children:t}):Object(p.jsx)(T.a,{to:n,state:{from:r.pathname}})},un=n(104),ln=n.n(un),dn=n(49),_n=n.n(dn),jn=function(e){var t=e.id,n=A((function(e){return e.menu.menu})),r=Object(i.useMemo)((function(){return n.find((function(e){return e._id===t}))}),[n,t]);return 0===n.length?null:Object(p.jsxs)("div",{className:_n.a.details,children:[Object(p.jsx)("img",{src:r.image_large,alt:r.name,className:_n.a.details__img}),Object(p.jsx)("p",{className:"".concat(_n.a.details__name," mt-4 mb-8 text text_type_main-medium"),children:r.name}),Object(p.jsx)("ul",{className:_n.a.details__list,children:ne.map((function(e){return Object(p.jsxs)("li",{className:"".concat(_n.a.details__item," mr-5 text text_type_main-default text_color_inactive"),children:[e.sign,Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"mt-2 text text_type_digits-default text_color_inactive",children:r[e.key]})]},e.id)}))})]})},mn=function(){var e=Object(T.j)();return Object(p.jsxs)("div",{className:ln.a.container,children:[Object(p.jsx)("h1",{className:"".concat(ln.a.title," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)(jn,{id:e.id})]})},bn=function(){var e=Object(T.j)(),t=Object(T.h)();return Object(p.jsx)(k,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){t("/",{replace:!0})},children:Object(p.jsx)(jn,{id:e.id})})},pn=n(27),fn=n.n(pn),On=function(e){var t=e.order,n=Object(i.useState)(!1),r=Object(W.a)(n,2),a=r[0],c=r[1];return Object(p.jsxs)("div",{className:"".concat(fn.a.order," pt-10"),children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-3",children:t.name}),Object(p.jsx)("p",{className:"".concat("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"===t.status&&fn.a.order__status_color_greentext," text_type_main-default mb-15"),children:t.status}),Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("ul",{className:"".concat(fn.a.order__list),children:t.ingrForRender.map((function(e,t){return Object(p.jsxs)("li",{className:"".concat(fn.a.order__item," mb-4"),children:[Object(p.jsx)("img",{src:e.image_mobile,alt:e.name,hidden:!a,onLoad:function(){return a?void 0:c(!0)},className:"".concat(fn.a.order__img," mr-4")}),Object(p.jsx)("p",{className:"".concat(fn.a["order__item-name"]," text text_type_main-default"),children:e.name}),Object(p.jsxs)("div",{className:fn.a.order__price,children:[Object(p.jsx)("span",{className:"".concat(fn.a["order__item-value"]," mr-2 ml-4 text text_type_digits-default"),children:"".concat(e.count," x ").concat(e.price)}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(p.jsxs)("div",{className:"".concat(fn.a.order__price," mt-10"),children:[Object(p.jsx)("p",{className:"text text_type_main-default text_color_inactive ",children:t.time}),Object(p.jsx)("span",{className:"".concat(fn.a.order__value," mr-2 text text_type_digits-default"),children:t.totalPrice}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]})]})},hn=function(){var e,t=Object(T.g)(),n=Object(T.h)(),r=null===(e=t.state)||void 0===e?void 0:e.order;return Object(p.jsx)(k,{title:"#".concat(r.number),modTitle:"text_type_digits-default",onClose:function(){var e;n(null===(e=t.state)||void 0===e?void 0:e.background,{replace:!0})},children:Object(p.jsx)(On,{order:r})})},xn=Object(i.memo)((function(){var e=D();return Object(i.useEffect)((function(){return e({type:tn,payload:"/orders/all"}),function(){e({type:an})}}),[e]),Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(T.b,{})})})),vn=n(77),gn=n.n(vn),yn=n(105),Nn=n.n(yn),kn=n(15),Cn=n.n(kn),En=Object(i.memo)((function(e){var t=e.mod,n=e.orderData,r=A((function(e){return e.menu.menu})),a=he(n,r),c=Object(T.h)(),s=Object(i.useState)(!1),o=Object(W.a)(s,2),u=o[0],l=o[1],d="profile"===t?12:7,_=a.ingrForRender,j=_.length>d?_.slice(0,d):_,b="profile"===t?"/profile/orders/".concat(a.number):"/feed/".concat(a.number),f="profile"===t?"/profile/orders":"/feed";return Object(p.jsxs)("li",{className:Cn.a.item,onClick:function(){c(b,{state:{background:{pathname:f},key:a.number,order:a}})},children:[Object(p.jsxs)("div",{className:"".concat(Cn.a["item__data-container"]," mb-6"),children:[Object(p.jsx)("span",{className:"".concat(Cn.a.item__number," text text_type_digits-default"),children:"#".concat(a.number)}),Object(p.jsx)("span",{className:"".concat(Cn.a.item__data," text text_type_main-default text_color_inactive"),children:a.time})]}),Object(p.jsx)("p",{className:"".concat(Cn.a.item__name," text text_type_main-medium"),children:n.name}),"profile"===t&&Object(p.jsx)("p",{className:"".concat(Cn.a.item__name," text text_type_main-default mt-2 ").concat("\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"===a.status&&Cn.a.item__name_color_green),children:a.status}),Object(p.jsxs)("div",{className:"".concat(Cn.a.item__result," mt-6"),children:[Object(p.jsxs)("ul",{className:Cn.a.item__ingredients,children:[j.map((function(e,t){return Object(p.jsxs)("li",{className:Cn.a.item__ingredient,style:{transform:"translate(".concat(-15*t,"px, ",0,"px)"),zIndex:d-t},children:[Object(p.jsx)("img",{src:e.image_mobile,alt:e.name,hidden:!u,onLoad:function(){return u?void 0:l(!0)},className:Cn.a.item__img}),e.count>1&&Object(p.jsx)("span",{className:"".concat(Cn.a.item__count," text text_type_main-default"),children:"+".concat(e.count)})]},t)})),_.length>d&&Object(p.jsx)("span",{className:Cn.a.item__ellipsis,style:{transform:"translate(".concat(-15*d,"px, ",0,"px)")},children:"..."})]}),Object(p.jsxs)("div",{className:Cn.a.item__price,children:[Object(p.jsx)("span",{className:"".concat(Cn.a.item__value," ml-6 mr-2 text text_type_digits-default"),children:a.totalPrice}),Object(p.jsx)(m.CurrencyIcon,{type:"primary"})]})]})]})})),Rn=function(e){var t=e.mod,n=A((function(e){var t;return null===(t=e.orders.resAll)||void 0===t?void 0:t.orders})),r=A((function(e){var t;return null===(t=e.orders.resOwner)||void 0===t?void 0:t.orders})),a="profile"===t?r:n;return Object(p.jsx)("ul",{className:"".concat(Nn.a.feed," ").concat(Nn.a["feed_type_".concat(t)]),children:null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsx)(En,{mod:t,orderData:e},e._id)}))})},wn=n(37),Sn=n.n(wn),Tn=function(){var e=A((function(e){return e.orders.resAll})),t=null===e||void 0===e?void 0:e.orders.reduce((function(e,t){return"done"===t.status?e.done.push(t.number):e.pending.push(t.number),e}),{done:[],pending:[]}),n=null===t||void 0===t?void 0:t.done.slice(0,20),r=null===t||void 0===t?void 0:t.pending.slice(0,20),a=Object(i.useCallback)((function(e,t,n){return Object(p.jsxs)("div",{className:Sn.a.state,children:[Object(p.jsx)("p",{className:"text text_type_main-medium mb-6",children:t}),Object(p.jsx)("ul",{className:Sn.a.state__numbers,children:null===e||void 0===e?void 0:e.map((function(e,t){return Object(p.jsx)("li",{className:"".concat(Sn.a.state__number," ").concat(Sn.a["state__number_color_".concat(n)]," text text_type_digits-default"),children:e},t)}))})]})}),[]),c=Object(i.useCallback)((function(e,t){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{className:"text text_type_main-medium mt-15",children:t}),Object(p.jsx)("span",{className:"".concat(Sn.a.stats," text text_type_digits-large"),children:e})]})}),[]);return Object(p.jsx)(p.Fragment,{children:e&&Object(p.jsxs)("div",{className:"".concat(Sn.a.container," ml-15"),children:[Object(p.jsxs)("div",{className:Sn.a["state-container"],children:[a(n,"\u0413\u043e\u0442\u043e\u0432\u044b:","green"),a(r,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:")]}),c(e.total,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"),c(e.totalToday,"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:")]})})},In=Object(i.memo)((function(){return Object(p.jsxs)("section",{className:gn.a.section,children:[Object(p.jsx)("h1",{className:"".concat(gn.a.title," mt-10 mb-5 ml-5 mr-5 text text_type_main-large"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("div",{className:gn.a.container,children:[Object(p.jsx)(Rn,{}),Object(p.jsx)(Tn,{})]})]})})),An=n(146),Dn=n.n(An),Un=function(){return Object(p.jsxs)("div",{className:Dn.a.container,children:[Object(p.jsx)(Qt,{mix:"mr-15 mt-20"}),Object(p.jsx)(Rn,{mod:"profile"})]})},Fn=n(106),Bn=n.n(Fn),Mn=function(){var e=Object(T.g)(),t=Object(T.j)(),n=A((function(e){return e.orders.resAll})),r=A((function(e){return e.orders.resOwner})),a=A((function(e){return e.menu.menu})),c=e.pathname.includes("profile"),s=Object(i.useMemo)((function(){var e=c?null===r||void 0===r?void 0:r.orders:null===n||void 0===n?void 0:n.orders;return null===e||void 0===e?void 0:e.find((function(e){return e.number===Number(null===t||void 0===t?void 0:t.id)}))}),[t,n,r,c]),o=void 0;return s&&a&&(o=he(s,a)),c&&r&&!s?Object(p.jsx)(T.a,{to:"*"}):c||!n||s?Object(p.jsx)(p.Fragment,{children:o&&Object(p.jsxs)("section",{className:Bn.a.section,children:[Object(p.jsx)("h1",{className:"".concat(Bn.a.title," text text_type_digits-default"),children:"#".concat(o.number)}),Object(p.jsx)(On,{order:o})]})}):Object(p.jsx)(T.a,{to:"*"})},qn=function(){var e,t=D(),n=Object(T.g)(),r=Object(T.i)(),a=null===(e=n.state)||void 0===e?void 0:e.background,c=Boolean(a)&&n.pathname.startsWith("/ingredients")||Boolean(a)&&!n.pathname.startsWith("/ingredients")&&"POP"!==r;return Object(i.useEffect)((function(){t(St()),t((function(e){return e({type:we}),et.getMenu().then((function(t){if(!t.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");e({type:Se,payload:t.data})})).catch((function(t){var n;e({type:Te}),console.log("Error ".concat(null!==(n=t.status)&&void 0!==n?n:"",": ").concat(t.message))}))}))}),[t]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(T.e,{location:c?a:n,children:[Object(p.jsxs)(T.c,{path:"/",element:Object(p.jsx)(L,{}),children:[Object(p.jsx)(T.c,{index:!0,element:Object(p.jsx)(ct,{})}),Object(p.jsx)(T.c,{path:"login",element:Object(p.jsx)(Dt,{})}),Object(p.jsx)(T.c,{path:"register",element:Object(p.jsx)(zt,{})}),Object(p.jsx)(T.c,{path:"forgot-password",element:Object(p.jsx)(Pt,{})}),Object(p.jsx)(T.c,{path:"reset-password",element:Object(p.jsx)(Lt,{})}),Object(p.jsx)(T.c,{path:"ingredients/:id",element:Object(p.jsx)(mn,{})}),Object(p.jsxs)(T.c,{path:"feed",element:Object(p.jsx)(xn,{}),children:[Object(p.jsx)(T.c,{index:!0,element:Object(p.jsx)(In,{})}),Object(p.jsx)(T.c,{path:":id",element:Object(p.jsx)(Mn,{})})]}),Object(p.jsxs)(T.c,{path:"profile",element:Object(p.jsx)(on,{to:"/login",children:Object(p.jsx)(T.b,{})}),children:[Object(p.jsx)(T.c,{index:!0,element:Object(p.jsx)(Kt,{})}),Object(p.jsx)(T.c,{path:"orders",element:Object(p.jsx)(Un,{})}),Object(p.jsx)(T.c,{path:"orders/:id",element:Object(p.jsx)(Mn,{})})]})]}),Object(p.jsx)(T.c,{path:"*",element:Object(p.jsx)(en,{})})]}),Object(p.jsxs)(T.e,{location:c?n:"/",children:[Object(p.jsx)(T.c,{path:"ingredients/:id",element:Object(p.jsx)(bn,{})}),Object(p.jsx)(T.c,{path:"profile/orders/:id",element:Object(p.jsx)(hn,{})}),Object(p.jsx)(T.c,{path:"feed/:id",element:Object(p.jsx)(hn,{})}),Object(p.jsx)(T.c,{path:"*",element:null})]})]})},zn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,320)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},Pn=n(32),Ln={menu:[],menuRequest:!1,menuFailed:!1},Jn={ingredients:[],bun:null,empty:!0,ingrCounter:{}},Wn={isModalOpen:!1,orderList:[],orderRes:void 0,orderRequest:!1,orderFailed:!1,canSubmit:!0},Hn={user:{name:"",email:""},isAuthorized:!1,userRequest:!1,userFailed:!1,wasInitialAuth:!1},Xn={isRequest:!1},Gn={errors:[]},Qn={message:""},Vn={show:!1,text:""},Zn={wsConnected:!1,resAll:void 0,resOwner:void 0},Kn=Object(Pn.combineReducers)({menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we:return Object(Y.a)(Object(Y.a)({},e),{},{menuRequest:!0,menuFailed:!1});case Se:return Object(Y.a)(Object(Y.a)({},e),{},{menuRequest:!1,menu:t.payload});case Te:return Object(Y.a)(Object(Y.a)({},Ln),{},{menuFailed:!0});default:return e}},burgConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return Object(Y.a)(Object(Y.a)({},e),{},{bun:t.payload,empty:!1});case Ae:return Object(Y.a)(Object(Y.a)({},e),{},{bun:null,empty:0===e.ingredients.length});case De:var n=t.payload._id,r=e.ingrCounter[n];return Object(Y.a)(Object(Y.a)({},e),{},{ingredients:[].concat(Object(J.a)(e.ingredients),[t.payload]),empty:!1,ingrCounter:Object(Y.a)(Object(Y.a)({},e.ingrCounter),{},Object(it.a)({},n,r?r+1:1))});case Ue:var a=Object(J.a)(e.ingredients),c=a.splice(t.payload,1),i=c[0]._id,s=e.ingrCounter[i];return Object(Y.a)(Object(Y.a)({},e),{},{ingredients:Object(J.a)(a),empty:0===a.length&&!e.bun,ingrCounter:Object(Y.a)(Object(Y.a)({},e.ingrCounter),{},Object(it.a)({},i,s>1&&void 0!==s?s-1:void 0))});case Fe:return Object(Y.a)(Object(Y.a)({},e),{},{ingredients:t.payload});case Be:return Jn;default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(Y.a)(Object(Y.a)({},Wn),{},{orderList:t.payload,orderRequest:!0,orderFailed:!1,canSubmit:!1});case qe:return Object(Y.a)(Object(Y.a)({},e),{},{isModalOpen:!0,orderRequest:!1,orderRes:t.payload,canSubmit:!0});case ze:return Object(Y.a)(Object(Y.a)({},Wn),{},{orderFailed:!0});case Pe:return Object(Y.a)(Object(Y.a)({},e),{},{isModalOpen:!1});default:return e}},userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:case yt:case Ct:return Object(Y.a)(Object(Y.a)({},e),{},{userRequest:!0,userFailed:!1});case vt:return Object(Y.a)(Object(Y.a)({},e),{},{isAuthorized:!0,userRequest:!1,user:t.payload,wasInitialAuth:!0});case gt:return Object(Y.a)(Object(Y.a)({},Hn),{},{isAuthorized:!1,userFailed:!0,wasInitialAuth:!0});case Nt:return Object(Y.a)(Object(Y.a)({},e),{},{userRequest:!1,user:Object(Y.a)(Object(Y.a)({},e.user),t.payload)});case kt:return Object(Y.a)(Object(Y.a)({},e),{},{userFailed:!0});case Et:return Object(Y.a)(Object(Y.a)({},Hn),{},{wasInitialAuth:!0});default:return e}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ot:return{isRequest:!0};case ht:return{isRequest:!1};default:return e}},errorAlert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{errors:[].concat(Object(J.a)(e.errors),[t.payload])};case F:return{errors:Object(J.a)(e.errors.slice(1))};default:return e}},confirmation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{show:!0,text:t.payload};case M:return Vn;default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return{message:t.payload};case z:return{message:""};default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nn:return Object(Y.a)(Object(Y.a)({},e),{},{wsConnected:!0});case rn:return Object(Y.a)(Object(Y.a)({},e),{},{error:t.payload,wsConnected:!1});case an:return Object(Y.a)(Object(Y.a)({},e),{},{error:void 0,wsConnected:!1});case cn:return t.payload.url.startsWith("wss://norma.nomoreparties.space/orders?token")&&t.payload.resApi.orders.reverse(),Object(Y.a)(Object(Y.a)({},e),{},{error:void 0,resAll:t.payload.url.startsWith("wss://norma.nomoreparties.space/orders/all")?Object(Y.a)({},t.payload.resApi):e.resAll,resOwner:t.payload.url.startsWith("wss://norma.nomoreparties.space/orders?token")?Object(Y.a)({},t.payload.resApi):e.resOwner});default:return e}}}),Yn=Kn,$n=n(147),er=n(148),tr=Object(er.composeWithDevTools)(Object(Pn.applyMiddleware)($n.a,(a="wss://norma.nomoreparties.space",c=sn,function(e){var t=null;return function(n){return function(r){var i,s=e.dispatch,o=r.type,u=r.payload,l=c.wsInit,d=c.onMessage,_=c.onOpen,j=c.onClose,m=c.onError;o===l&&(t=new WebSocket(u?a+u:a)),o===j&&1===(null===(i=t)||void 0===i?void 0:i.readyState)&&t.close(),t&&(t.onopen=function(e){s({type:_})},t.onerror=function(e){s({type:m,payload:e})},t.onmessage=function(e){var n,r=e.data,a=JSON.parse(r);a.success&&s({type:d,payload:{resApi:a,url:null===(n=t)||void 0===n?void 0:n.url}}),"Invalid or missing token"===a.message&&et.refreshToken(fe("refreshToken")).catch((function(e){Object(I.b)((function(){s({type:ze}),s({type:U,payload:e})}))}))},t.onclose=function(e){s({type:j})}),n(r)}}}))),nr=Object(Pn.createStore)(Yn,tr);u.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(I.a,{store:nr,children:Object(p.jsx)(b.a,{children:Object(p.jsx)(qn,{})})})}),document.getElementById("root")),zn()},35:function(e,t,n){e.exports={constructor:"burger-constructor_constructor__1e47d",constructor__text:"burger-constructor_constructor__text__Q1in1",constructor__container:"burger-constructor_constructor__container__3da0Q",constructor__scroll:"burger-constructor_constructor__scroll__5JY2u",constructor__confirm:"burger-constructor_constructor__confirm__1WLTB",constructor__price:"burger-constructor_constructor__price__3B4v_","constructor__price-value":"burger-constructor_constructor__price-value__3Qpb2"}},36:function(e,t,n){e.exports={container:"profile-page_container__mSNh8",form:"profile-page_form__1uIuX",form__list:"profile-page_form__list__2aHPL",form__input:"profile-page_form__input__eK8Z4"}},37:function(e,t,n){e.exports={container:"stats_container__CeZWM","state-container":"stats_state-container__3Dfqp",state:"stats_state__3iQl9",state__numbers:"stats_state__numbers__3Bqru",state__number:"stats_state__number__2X7Hv",state__number_color_green:"stats_state__number_color_green__WEZVP",stats:"stats_stats__1CVCO"}},41:function(e,t,n){e.exports={window:"burg-ingr-scroll_window__2XuO4",block:"burg-ingr-scroll_block__3juv3",block__item:"burg-ingr-scroll_block__item__37_T6",block__title:"burg-ingr-scroll_block__title__2lGq0",cards:"burg-ingr-scroll_cards__2b1Bz",cards__card:"burg-ingr-scroll_cards__card__3rfeh"}},47:function(e,t,n){e.exports={card:"burg-ingr-card_card__1X7lB",card__img:"burg-ingr-card_card__img__1xWwk",card__box:"burg-ingr-card_card__box__7u6UW",card__name:"burg-ingr-card_card__name__1_ZOG"}},48:function(e,t,n){e.exports={details:"order-details_details__cfqGj",details__order:"order-details_details__order__2_M6h",details__text:"order-details_details__text__1VEsL"}},49:function(e,t,n){e.exports={details:"ingredient-details_details__1gmxv",details__img:"ingredient-details_details__img__16duo",details__name:"ingredient-details_details__name__1QwE0",details__list:"ingredient-details_details__list__3XkCw",details__item:"ingredient-details_details__item__2SCdi"}},57:function(e,t,n){e.exports={form:"form_form__3e_pg",form__list:"form_form__list__2uITG",form__input:"form_form__input__Jad1T"}},58:function(e,t,n){e.exports={container:"page-404_container__3D3_A",text:"page-404_text__3Jn04",link:"page-404_link__19sfJ"}},73:function(e,t,n){e.exports={modal:"modal_modal__3NVBC",modal__container:"modal_modal__container__1Din9",modal__title:"modal_modal__title__RpNNH"}},74:function(e,t,n){e.exports={container:"alert_container__1vj0u",title:"alert_title__FLogo",text:"alert_text__3H0MB"}},75:function(e,t,n){e.exports={container:"paragraph-link_container__1LUas","paragraph-link":"paragraph-link_paragraph-link__1Rnpv",link:"paragraph-link_link__1XYgM"}},76:function(e,t,n){e.exports={container:"confirm_container__3Nilk",text:"confirm_text__2XXNi",buttons:"confirm_buttons__2MnAb"}},77:function(e,t,n){e.exports={section:"feed-page_section__ohBsm",title:"feed-page_title__1Aj6I",container:"feed-page_container__1Nygp"}},98:function(e,t,n){e.exports={layout:"layout-with-header_layout__3Zw5R",main:"layout-with-header_main__2RteE"}}},[[312,1,2]]]);
//# sourceMappingURL=main.b498e999.chunk.js.map